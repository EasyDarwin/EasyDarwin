import{u as K,l as ct,t as Oe,a as it,b as Ue}from"./index-BZNXQtYc.1735711566000.js";import{d as dt}from"./pinia-1a_NKH_A.1735711566000.js";import{u as oe,b as le,R as mt}from"./vue-router-DjNbiwhF.1735711566000.js";import{u as X}from"./vue-i18n-uJR4hMNF.1735711566000.js";import{u as pt,a as _t,b as vt,c as ft,d as yt,e as ht,o as re}from"./@vueuse-DbXYpnAv.1735711566000.js";import{d as ee}from"./dayjs-B8XocIVj.1735711566000.js";import{r as B,w as ae,f as l,W as t,Z as O,c as n,X as a,u,_ as j,J as A,$ as M,F as H,a0 as W,V as r,a1 as je,a2 as q,a3 as T,a4 as gt,z as wt,a5 as Ae,a6 as be,x as Me,E as Be,a7 as kt,n as He,a8 as bt,d as St,s as xt,a9 as ce,G as Tt}from"./@vue-Bxslm7sw.1735711566000.js";/* empty css                                                                                    */import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.1735711566000.js";import{G as Ct,H as $t,J as Lt,S as Ee,K as ie,N as Pt,O as Rt,T as Ke,b as Ft,V as Ot,X as Ut,Y as De,Z as At,D as Mt}from"./@ant-design-BLetnoCm.1735711566000.js";import{c as de,d as me,D as Bt,e as Et,T as Dt,I as ze,f as It,g as jt,h as Ht,S as Kt,i as zt,j as Nt,B as Ne,k as Ve,m as pe,_ as se,n as ue,o as _e,p as Vt,M as ve,q as Wt,r as qt,s as Gt,t as Jt,u as xe,v as We,w as Zt,x as Xt,F as Yt,y as qe,L as Qt,z as ea,A as Ge,E as ta,G as aa,H as Je,J as fe}from"./ant-design-vue-DoWxoWwg.1735711566000.js";import{u as oa}from"./base-DkT7gjV-.1735711566000.js";import{I as te}from"./@iconify-B0GEP3fu.1735711566000.js";import{u as Ze}from"./user-CIHZcNMc.1735711566000.js";import"./nprogress-CLSsUHm1.1735711566000.js";import"./call-bind-9I5n-WuC.1735711566000.js";import"./get-intrinsic-CCpWxmPk.1735711566000.js";import"./es-errors-DzOT6E3C.1735711566000.js";import"./gopd-fcd2-aIC.1735711566000.js";import"./es-define-property-bDCdrV83.1735711566000.js";import"./has-symbols-BaUvM3gb.1735711566000.js";import"./dunder-proto-0l1vuzli.1735711566000.js";import"./call-bind-apply-helpers-0RM3uiXS.1735711566000.js";import"./function-bind-CHqF18-c.1735711566000.js";import"./hasown-DByPsmSW.1735711566000.js";import"./set-function-length-BtQInkhp.1735711566000.js";import"./define-data-property-MfCsHmXW.1735711566000.js";import"./has-property-descriptors-Dq-3HQZp.1735711566000.js";/* empty css                                  */import"./pinia-plugin-persistedstate-n2tMOXAx.1735711566000.js";import"./lodash-es-BtLQVgmQ.1735711566000.js";import"./@babel-BiFW4_mA.1735711566000.js";import"./@ctrl-DOFZgDuz.1735711566000.js";import"./resize-observer-polyfill-B1PUzC5B.1735711566000.js";import"./throttle-debounce-CUWDS_la.1735711566000.js";import"./vue-types-C5fUfLeo.1735711566000.js";import"./dom-align-CRCehRfe.1735711566000.js";import"./async-validator-DKvM95Vc.1735711566000.js";import"./scroll-into-view-if-needed--Yz0kGe5.1735711566000.js";import"./compute-scroll-into-view-1gs_hJI2.1735711566000.js";import"./@emotion-BtrR-yrm.1735711566000.js";import"./stylis-OW4gUFyn.1735711566000.js";import"./@intlify-BG2mqeYI.1735711566000.js";import"./vue-demi-Dq6ymT-8.1735711566000.js";import"./request-YsyQPLWC.1735711566000.js";import"./axios-upsvKRUO.1735711566000.js";import"./qs-Dl3fWgBH.1735711566000.js";import"./side-channel-DffzUMpz.1735711566000.js";import"./object-inspect-DYmWqAa6.1735711566000.js";import"./crypto-js-oA4IVPzm.1735711566000.js";import"./base-ZGFgEhjM.1735711566000.js";const Y=dt("system",()=>{const{t:p}=X(),o=oe(),s=le(),e=K(),c=B(o.options.routes.find(k=>k.name==="Layout").children.filter(k=>k.name!=="Refresh")),d=B([]),m=(k,F)=>{k.forEach(U=>{U.searchTitle=p(U.meta.title),U.children?m(U.children,U):(F&&(U.searchTitle=`${F.searchTitle} / ${p(U.meta.title)}`),d.value.push(U))})};m(c.value);const y=(k,F)=>{switch(k){case"add":c.value.push(F);break;case"delete":c.value=c.value.filter(U=>U.name!==F.name);break}d.value=[],m(c.value)};ae(()=>c.value,()=>{m(c.value)});const i=B([]),_=l(()=>i.value.filter(k=>o.hasRoute(k.name))),$=l(()=>i.value.find(k=>k.fullPath===s.fullPath));let f=B([]);const b=k=>{typeof k=="string"?!f.value.includes(k)&&f.value.push(k):k.forEach(F=>{F&&!f.value.includes(F)&&f.value.push(F)})},L=k=>{typeof k=="string"?f.value=f.value.filter(F=>F!==k):f.value=f.value.filter(F=>!k.includes(F))},v=()=>{f.value=[]},g=k=>({...k,matched:k.matched.map(F=>{const{meta:U,path:Q,name:ne}=F;return{meta:U,path:Q,name:ne}})}),w=k=>{const F=o.getRoutes(),U=k.reduce((Q,ne)=>{var Le,Pe,Re;if(ne.name&&o.hasRoute(ne.name)){const Fe=(Re=(Pe=(Le=F.find(rt=>rt.name===ne.name))==null?void 0:Le.components)==null?void 0:Pe.default)==null?void 0:Re.name;Fe&&Q.push(Fe)}return Q},[]);L(U)},x=k=>{i.value.some(U=>U.fullPath===k.fullPath)||i.value.push(g(k))},S=k=>{const F=i.value.findIndex(Q=>Q.fullPath===k.fullPath),U=Object.is($.value,i.value[F]);if(w(i.value.splice(F,1)),U){const Q=i.value[Math.max(0,i.value.length-1)];o.push(Q)}},D=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);w(i.value.splice(0,F))},z=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);w(i.value.splice(F+1))},R=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);if(F!==-1){const U=i.value.splice(F,1);w(i.value),i.value=U}},C=()=>{w(i.value),i.value=[]};ae(()=>s.fullPath,()=>{["Login","NotFound","Refresh",void 0].includes(s.name)||x(s)},{immediate:!0}),window.addEventListener("beforeunload",()=>{e.layoutSetting.cacheTabs||(i.value=[$.value||i.value[0]].filter(Boolean))});const I=B({}),E=["日","一","二","三","四","五","六"],G=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];pt(()=>{I.value={year:ee().year(),month:ee().month()+1,day:ee().date(),hour:ee().hour(),minute:ee().minute(),second:ee().second(),week:e.layoutSetting.language==="zhCN"?`星期${E[ee().day()]}`:G[ee().day()]}});const N=B(""),J=B(!1),V=l(()=>e.layoutSetting.lockScreenTime*60*60),h=B(0);setInterval(()=>{h.value+=1},1e3);const P=k=>{J.value=k,k||(Qe(),h.value=0)},Ce=k=>{N.value=encodeURI(k)},Qe=()=>{N.value=""},et=k=>encodeURI(k)===N.value,tt=()=>decodeURI(N.value);ae(V,()=>{h.value=0}),ae(h,()=>{h.value>=V.value&&e.layoutSetting.showLockScreen&&(P(!0),Ce("123456"))});const{charging:at,chargingTime:ot,dischargingTime:nt,level:lt}=_t(),st=B({charging:at,chargingTime:ot,dischargingTime:nt,level:lt}),ut=vt(),$e=B("desktop");return ft(document.body,k=>{const F=k[0],{width:U}=F.contentRect;$e.value=U<992?"mobile":"desktop"}),{menus:c,menuList:d,tabsList:i,getTabsList:_,getCurrentTab:$,keepAliveList:f,systemTime:I,lockScreenState:J,lockScreenPassword:N,battery:st,online:ut,device:$e,updateMenus:y,addTabs:x,closeCurrentTab:S,closeLeftTabs:D,closeRightTabs:z,closeOtherTabs:R,closeAllTabs:C,addKeepAliveList:b,removeKeepAliveList:L,clearKeepAliveList:v,setLockScreenState:P,setLockScreenPassword:Ce,verifyLockScreenPassword:et,decodeLockScreenPassword:tt,clearCacheReload:()=>{localStorage.clear(),sessionStorage.clear(),location.reload(),c.value=o.options.routes.find(k=>k.name==="Layout").children.filter(k=>k.name!=="Refresh"),d.value=[],m(c.value),J.value=!1,N.value="",i.value=[],f.value=[]}}}),na=["onClick"],la={class:"w60px h60px","aria-hidden":"true"},sa=["xlink:href"],ua={key:0,class:"style-checkbox-item"},ra={class:"flex-ac"},ca={__name:"LayoutSetting",setup(p){const{t:o}=X(),s=K(),e=l(()=>s.layoutSetting),c=l(()=>s.layoutSetting.colorPrimary),d=l(()=>({"--custom-color":c.value})),m=Y(),y=B(!1),i=()=>{y.value=!0},_=v=>{s.updateLayoutSetting({layout:v})},$=v=>{s.updateLayoutSetting({colorPrimary:v})},f=v=>c.value===v?"visible":"hidden",b=()=>{const v=JSON.stringify(e.value);navigator.clipboard.writeText(v),de.success(o("message.copySuccess"))},L=v=>{$(v.target.value)};return(v,g)=>{const w=me,x=Bt,S=Et,D=Dt,z=ze,R=It,C=jt,I=Ht,E=Kt,G=zt,N=Nt,J=Ne,V=Ve;return t(),O(H,null,[n(w,{title:u(o)("setting.projectConfig"),placement:"bottomRight"},{default:a(()=>[n(u(Ct),{onClick:i})]),_:1},8,["title"]),n(V,{open:y.value,"onUpdate:open":g[3]||(g[3]=h=>y.value=h),placement:"right",title:u(o)("setting.projectConfig")},{footer:a(()=>[j("div",ra,[n(J,{class:"w-45%",type:"primary",onClick:b},{default:a(()=>[A(M(u(o)("setting.copy")),1)]),_:1}),n(J,{class:"w-45%",type:"primary",danger:"",onClick:u(m).clearCacheReload},{default:a(()=>[A(M(u(o)("setting.clearCacheAndReset")),1)]),_:1},8,["onClick"])])]),default:a(()=>[n(S,{title:u(o)("setting.menuLayout"),column:5},{default:a(()=>[(t(!0),O(H,null,W(u(ct),h=>(t(),r(x,{key:h.value},{default:a(()=>[n(w,{title:u(o)(h.label)},{default:a(()=>[j("div",{class:je(["style-checkbox-item",{active:e.value.layout===h.value}]),onClick:P=>_(h.value)},[(t(),O("svg",la,[j("use",{"xlink:href":`#svg-icon-${h.value}`},null,8,sa)]))],10,na)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1},8,["title"]),n(S,{title:u(o)("setting.themeColor"),column:u(Oe).length-1},{default:a(()=>[(t(!0),O(H,null,W(u(Oe),h=>(t(),r(x,{key:h.key},{default:a(()=>[h.tag==="checkbox"?(t(),O("div",ua,[n(w,{title:u(o)(h.title)},{default:a(()=>[n(D,{color:h.value,onClick:P=>$(h.value)},{default:a(()=>[j("span",{style:q({visibility:f(h.value)})}," ✔ ",4)]),_:2},1032,["color","onClick"])]),_:2},1032,["title"])])):T("",!0),h.tag==="input-color"?(t(),r(R,{key:1,justify:"space-between",class:"w-full flex items-center style-checkbox-item"},{default:a(()=>[A(M(u(o)("setting.customColor"))+" ",1),n(D,{color:c.value,class:"relative overflow-hidden"},{default:a(()=>[n(z,{type:"color",class:"cursor-pointer absolute top-0 left-0 w-full h-full",style:q(d.value),modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=P=>c.value=P),onInput:L},null,8,["style","modelValue"]),j("span",{style:q({visibility:f(c.value)})}," ✔ ",4)]),_:1},8,["color"])]),_:1})):T("",!0)]),_:2},1024))),128))]),_:1},8,["title","column"]),n(S,{title:u(o)("setting.pageDisplay"),column:1},{default:a(()=>[(t(!0),O(H,null,W(u(it),h=>(t(),r(x,{key:h.value},{default:a(()=>[h.tag==="switch"?(t(),r(R,{key:0,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(u(o)(h.label))+" ",1),n(C,{checked:e.value[h.value],"onUpdate:checked":P=>e.value[h.value]=P},null,8,["checked","onUpdate:checked"])]),_:2},1024)):T("",!0),h.tag==="input-number"?(t(),r(R,{key:1,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(u(o)(h.label))+" ",1),n(I,{style:{width:"200px"},value:e.value[h.value],"onUpdate:value":P=>e.value[h.value]=P,min:h.min,max:h.max,"addon-after":u(o)(h.unit)},null,8,["value","onUpdate:value","min","max","addon-after"])]),_:2},1024)):T("",!0),h.tag==="input"?(t(),r(R,{key:2,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(u(o)(h.label))+" ",1),n(z,{style:{width:"200px"},value:e.value[h.value],"onUpdate:value":P=>e.value[h.value]=P},null,8,["value","onUpdate:value"])]),_:2},1024)):T("",!0),h.tag==="select"?(t(),r(R,{key:3,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(u(o)(h.label))+" ",1),h.value==="animation"?(t(),r(G,{key:0,style:{width:"200px"},value:e.value.animation,"onUpdate:value":g[1]||(g[1]=P=>e.value.animation=P)},{default:a(()=>[(t(!0),O(H,null,W(u(Ue),P=>(t(),r(E,{key:P.animation},{default:a(()=>[A(M(u(o)(P.name)),1)]),_:2},1024))),128))]),_:1},8,["value"])):h.value==="animationDirection"?(t(),r(G,{key:1,style:{width:"200px"},value:e.value.animationDirection,"onUpdate:value":g[2]||(g[2]=P=>e.value.animationDirection=P)},{default:a(()=>[(t(!0),O(H,null,W(u(Ue).find(P=>P.animation===e.value.animation).options,P=>(t(),r(E,{key:P},{default:a(()=>[A(M(P),1)]),_:2},1024))),128))]),_:1},8,["value"])):(t(),r(G,{key:2,style:{width:"200px"},value:e.value[h.value],"onUpdate:value":P=>e.value[h.value]=P},{default:a(()=>[(t(!0),O(H,null,W(h.options,P=>(t(),r(E,{key:P.value,value:P.value},{default:a(()=>[A(M(u(o)(P.label)),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"]))]),_:2},1024)):T("",!0),h.tag==="segmented"?(t(),r(R,{key:4,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(u(o)(h.label))+" ",1),n(N,{value:e.value[h.value],"onUpdate:value":P=>e.value[h.value]=P,options:h.options.map(P=>({value:P.value,label:u(o)(P.label)}))},null,8,["value","onUpdate:value","options"])]),_:2},1024)):T("",!0)]),_:2},1024))),128))]),_:1},8,["title"])]),_:1},8,["open","title"])],64)}}},Te=Se(ca,[["__scopeId","data-v-de9767ed"]]),Z={__name:"LayoutPage",setup(p){const o=Y(),s=l(()=>o.keepAliveList),e=K().layoutSetting,c=l(()=>e.onlyShowContent),d=l(()=>e.showAnimation),m=l(()=>e.showTabs),y=l(()=>e.showHeader),i=l(()=>e.showSetting),_=B("auto"),$=l(()=>c.value?"100vh":`calc(100vh - ${e.showHeader?"var(--app-header-height)":"0px"} - ${e.showTabs?"50px":"0px"} - ${e.showFooter?"var(--app-footer-height)":"0px"})`),f=l(()=>`animate__animated animate__${e.animation}In${e.animationDirection==="Default"?"":e.animationDirection}`),b=l(()=>`animate__animated animate__${e.animation}Out${e.animationDirection==="Default"?"":e.animationDirection}`);return(L,v)=>{const g=pe;return t(),O("div",{class:"p20px overflow-hidden",style:q({overflow:_.value,height:$.value})},[n(u(mt),null,{default:a(({Component:w,route:x})=>[(t(),r(gt,null,{fallback:a(()=>v[3]||(v[3]=[A(" 正在加载... ")])),default:a(()=>[d.value?(t(),r(wt,{key:0,mode:"out-in",appear:"","enter-active-class":f.value,"leave-active-class":b.value,onBeforeEnter:v[0]||(v[0]=S=>_.value="hidden"),onAfterEnter:v[1]||(v[1]=S=>_.value="auto"),onBeforeLeave:v[2]||(v[2]=S=>_.value="hidden")},{default:a(()=>[(t(),r(Ae,{include:s.value},[(t(),r(be(w),{key:x.fullPath}))],1032,["include"]))]),_:2},1032,["enter-active-class","leave-active-class"])):(t(),r(Ae,{key:1,include:s.value},[(t(),r(be(w),{key:x.fullPath}))],1032,["include"]))]),_:2},1024))]),_:1}),!y.value&&!m.value&&i.value?(t(),r(g,{key:0,class:"pos-fixed right--1 top-100 z-999",bodyStyle:{padding:"10px"}},{default:a(()=>[n(Te)]),_:1})):T("",!0)],4)}}},ia={__name:"OnlyShowContentLayout",setup(p){const s=K().layoutSetting,e=l(()=>s.watermark),c=l(()=>s.watermarkArea==="content"),d=l(()=>s.watermarkText),m=l(()=>s.showSetting);return(y,i)=>{const _=se,$=pe,f=ue;return t(),r(f,{class:"h100vh overflow-hidden"},{default:a(()=>[e.value&&c.value?(t(),r(_,{key:0,content:d.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1})),m.value?(t(),r($,{key:2,class:"pos-fixed right--1 top-100 z-999",bodyStyle:{padding:"10px"}},{default:a(()=>[n(Te)]),_:1})):T("",!0)]),_:1})}}},ye={__name:"LayoutTitle",props:{collapsed:{type:Boolean}},setup(p){const o=oa(),s=oe(),e=l(()=>o.serverInfo&&o.serverInfo.version),c=K(),d=c.layoutSetting,m=l(()=>d.title),y=l(()=>c.titleColor),i=l(()=>({height:"var(--app-header-height)",color:y.value})),_=()=>{s.push({name:"Live"})};return o.getServerInfo(),($,f)=>(t(),O("div",{class:"flex-cc overflow-hidden whitespace-nowrap font-500 text-20px cp",style:q(i.value)},[Me(j("span",null,"E",512),[[Be,p.collapsed]]),Me(j("div",{class:je([{pr24px:!p.collapsed}]),onClick:_},[A(M(m.value),1),j("sup",null,M(e.value),1)],2),[[Be,!p.collapsed]])],4))}},da=["title"],Xe={__name:"MenuItemContent",props:{item:{type:Object,default:()=>({})}},setup(p){const{t:o}=X();return(s,e)=>{var c,d,m,y;return t(),O(H,null,[(d=(c=p.item)==null?void 0:c.meta)!=null&&d.icon?(t(),r(u(te),{key:0,class:"iconify anticon",icon:p.item.meta.icon},null,8,["icon"])):T("",!0),j("span",{class:"ml10px text-14px",title:u(o)((y=(m=p.item)==null?void 0:m.meta)==null?void 0:y.title)},M(u(o)(p.item.meta.title)),9,da)],64)}}},ma={__name:"MenuItem",props:{item:{type:Object,default:()=>({})}},setup(p){const o=oe(),s=e=>{const{outsideLink:c}=e.meta||{};c?window.open(e.path):o.push({name:e.name})};return(e,c)=>{var m;const d=_e;return t(),r(d,{key:(m=p.item)==null?void 0:m.name,onClick:c[0]||(c[0]=y=>s(p.item))},{default:a(()=>[n(Xe,{item:p.item},null,8,["item"])]),_:1})}}},Ye={__name:"SubMenuItem",props:{item:{type:Object,default:()=>({})}},setup(p){const o=s=>{var e;return(e=s==null?void 0:s.children)==null?void 0:e.length};return(s,e)=>{var d;const c=Vt;return o(p.item)?(t(),r(c,kt({key:0},s.$attrs,{key:(d=p.item)==null?void 0:d.name}),{title:a(()=>[n(Xe,{item:p.item},null,8,["item"])]),default:a(()=>[(t(!0),O(H,null,W(p.item.children||[],m=>(t(),r(Ye,{key:m.name,item:m},null,8,["item"]))),128))]),_:1},16)):(t(),r(ma,{key:1,item:p.item},null,8,["item"]))}}},he={__name:"LayoutMenu",props:{collapsed:{type:Boolean}},setup(p){const o=p,s=le(),e=oe(),c=B([]),d=B([]),m=Y(),y=l(()=>m.menus),_=K().layoutSetting,$=l(()=>_.layout==="topmenu"),f=l(()=>_.menuTheme),b=()=>s.meta.namePath??s.matched.slice(1).map(g=>g.name),L=g=>e.getRoutes().find(w=>w.name===g);ae(()=>o.collapsed,()=>{c.value=s.name?[s.name]:[],d.value=b()}),ae(()=>s.fullPath,()=>{c.value=s.name?[s.name]:[],d.value=b()},{immediate:!0});const v=({key:g})=>{if(g===s.name)return;const w=c.value,x=L(g),{outsideLink:S}=(x==null?void 0:x.meta)||{};x&&S&&He(()=>{c.value=w})};return(g,w)=>{const x=ve;return t(),r(x,{class:"border-none!","selected-keys":c.value,"onUpdate:selectedKeys":w[0]||(w[0]=S=>c.value=S),"open-keys":$.value?[]:d.value,mode:$.value?"horizontal":"inline",theme:f.value,collapsed:p.collapsed,collapsible:"",onClick:v},{default:a(()=>[(t(!0),O(H,null,W(y.value,S=>(t(),r(Ye,{key:S.name,item:S},null,8,["item"]))),128))]),_:1},8,["selected-keys","open-keys","mode","theme","collapsed"])}}},pa=(p,o=1)=>{let s=0,e=0,c=0;return p.length===4?(s="0x"+p[1]+p[1],e="0x"+p[2]+p[2],c="0x"+p[3]+p[3]):p.length===7&&(s="0x"+p[1]+p[2],e="0x"+p[3]+p[4],c="0x"+p[5]+p[6]),`rgba(${+s},${+e},${+c},${o})`},_a={class:"layout-breadcrumb"},va={class:"cursor-pointer"},fa={__name:"LayoutBreadcrumb",setup(p){const{t:o}=X(),s=oe(),e=le(),c=Y(),d=K(),m=l(()=>d.headerColor),y=l(()=>m.value==="#fff"?"dark":"light"),i=l(()=>{var b,L,v;if((b=e.meta)!=null&&b.namePath){let g=c.menus;const w=(v=(L=e.meta)==null?void 0:L.namePath)==null?void 0:v.map(x=>{const S=g.find(D=>D.name===x);return g=(S==null?void 0:S.children)||[],S});return[{name:"__index",meta:{title:"route.home"},children:c.menus},...w]}return e.matched}),_=b=>{const{outsideLink:L}=(b==null?void 0:b.meta)||{};if(L)window.open(b.path);else{const v=typeof b.redirect=="string"?b.redirect:b;s.push(v)}},$=b=>{var L;return[(L=i.value[b+1])==null?void 0:L.name]},f=l(()=>({"--breadcrumb-overlay-color":pa(m.value,.5),"--breadcrumb-color":m.value}));return(b,L)=>{const v=_e,g=ve,w=Wt,x=qt;return t(),O("div",_a,[n(x,{style:q(f.value)},{default:a(()=>[(t(!0),O(H,null,W(i.value,(S,D)=>{var z;return t(),r(w,{key:S==null?void 0:S.name},bt({default:a(()=>{var R;return[j("span",va,M(u(o)((R=S==null?void 0:S.meta)==null?void 0:R.title)),1)]}),_:2},[(z=S==null?void 0:S.children)!=null&&z.length?{name:"overlay",fn:a(()=>[n(g,{"selected-keys":$(D),theme:y.value},{default:a(()=>[(t(!0),O(H,null,W(S==null?void 0:S.children,R=>(t(),r(v,{key:R.name,onClick:C=>_(R)},{default:a(()=>{var C;return[j("span",null,M(u(o)((C=R.meta)==null?void 0:C.title)),1)]}),_:2},1032,["onClick"]))),128))]),_:2},1032,["selected-keys","theme"])]),key:"0"}:void 0]),1024)}),128))]),_:1},8,["style"])])}}},ya=Se(fa,[["__scopeId","data-v-f703bb0e"]]),ha=St({__name:"FullScreen",setup(p){const{toggle:o,isFullscreen:s}=yt(),{t:e}=X(),c=l(()=>u(s)?e("setting.exitFullscreen"):e("setting.fullscreen"));return(d,m)=>{const y=me;return t(),r(y,{title:c.value},{default:a(()=>[j("span",{onClick:m[0]||(m[0]=(...i)=>u(o)&&u(o)(...i)),class:"cursor-pointer"},[u(s)?(t(),r(u(Lt),{key:1})):(t(),r(u($t),{key:0}))])]),_:1},8,["title"])}}}),ga={key:0,class:"max-h600px overflow-auto"},wa={class:"flex-bc"},ka={key:0},ba={__name:"SearchMenu",setup(p){const o=oe(),{t:s}=X(),e=Y(),c=l(()=>e.menuList),d=K(),m=l(()=>d.layoutSetting),y=B(!1),i=B(""),_=xt([]),$=B(null),f=B("");ae(()=>y.value,()=>{y.value&&He(()=>{$.value.focus()})});const b=ht(()=>L(),300),L=()=>{var g;i.value?(_.value=c.value.filter(w=>{var x;return(x=w.searchTitle)==null?void 0:x.toLocaleLowerCase().includes(i.value.toLocaleLowerCase().trim())}),f.value=(g=_.value[0])==null?void 0:g.name):(_.value=[],f.value="")},v=()=>{f.value&&(o.push({name:f.value}),y.value=!1,i.value="",_.value=[])};return re("Enter",v),re("Escape",()=>{y.value=!1,i.value="",_.value=[]}),re("ArrowUp",()=>{const{length:g}=_.value;if(!g)return;const w=_.value.findIndex(x=>x.name===f.value);w===0?f.value=_.value[g-1].name:f.value=_.value[w-1].name}),re("ArrowDown",()=>{const{length:g}=_.value;if(!g)return;const w=_.value.findIndex(x=>x.name===f.value);w===g-1?f.value=_.value[0].name:f.value=_.value[w+1].name}),(g,w)=>{const x=ze,S=pe,D=Gt,z=Jt,R=xe,C=We,I=me;return t(),r(I,{title:u(s)("setting.searchMenu")},{default:a(()=>[n(u(Ee),{onClick:w[0]||(w[0]=E=>y.value=!0)}),n(C,{open:y.value,"onUpdate:open":w[2]||(w[2]=E=>y.value=E),closable:!1,keyboard:!1},{footer:a(()=>[j("div",wa,[n(R,{size:20},{default:a(()=>[n(z,{class:"flex items-center"},{default:a(()=>[n(u(te),{class:"shadow mr8px",icon:"mdi:keyboard-return"}),A(" "+M(u(s)("setting.confirm")),1)]),_:1}),n(z,{class:"flex items-center"},{default:a(()=>[n(u(te),{class:"shadow mr8px",icon:"mdi:keyboard-arrow-up"}),n(u(te),{class:"shadow mr8px",icon:"mdi:keyboard-arrow-down"}),A(" "+M(u(s)("setting.toggle")),1)]),_:1}),n(z,{class:"flex items-center"},{default:a(()=>[n(u(te),{class:"shadow mr8px",icon:"mdi:keyboard-esc"}),A(" "+M(u(s)("setting.close")),1)]),_:1})]),_:1}),_.value.length>0?(t(),O("span",ka,"共"+M(_.value.length)+"项",1)):T("",!0)])]),default:a(()=>[n(x,{ref_key:"inputRef",ref:$,size:"large",placeholder:"搜索菜单",value:i.value,"onUpdate:value":w[1]||(w[1]=E=>i.value=E),onChange:u(b)},{prefix:a(()=>[n(u(Ee))]),_:1},8,["value","onChange"]),_.value.length>0?(t(),O("div",ga,[(t(!0),O(H,null,W(_.value,E=>(t(),r(S,{key:E.path,class:"shadow mt10px cursor-pointer",bodyStyle:{padding:"18px"},style:q(f.value===E.name?{background:m.value.colorPrimary,color:"#fff"}:{}),onMouseenter:G=>f.value=E.name,onClick:v},{default:a(()=>[n(u(te),{class:"iconify anticon mr10px",icon:E.meta.icon},null,8,["icon"]),A(" "+M(E.searchTitle)+" ",1),f.value===E.name?(t(),r(u(te),{key:0,class:"float-right mt5px",icon:"mdi:keyboard-return"})):T("",!0)]),_:2},1032,["style","onMouseenter"]))),128))])):(t(),r(D,{key:1,class:"p20px m0"}))]),_:1},8,["open"])]),_:1},8,["title"])}}},Sa={__name:"ChangePassword",setup(p){const{t:o}=X(),s=Ze(),e=B({password:"",new_password:"",confirm_password:""}),c=()=>{if(e.value.new_password!=e.value.confirm_password){de.error(o("message.TwoDifferentPasswords"));return}s.changePassword(e.value).then(()=>{de.success(`${o("message.modifySuccess")},${o("message.jumpTo3")}`),setTimeout(()=>{s.logout()},3*1e3)})},d=m=>{console.log("Failed:",m)};return(m,y)=>{const i=Zt,_=Xt,$=Ne,f=Yt;return t(),r(f,{model:e.value,onFinish:c,onFinishFailed:d},{default:a(()=>[n(_,{name:"password",rules:[{required:!0,message:u(o)("message.PleaseEnterOriginalPassword")}]},{default:a(()=>[n(i,{value:e.value.password,"onUpdate:value":y[0]||(y[0]=b=>e.value.password=b),placeholder:u(o)("message.PleaseEnterOriginalPassword")},{prefix:a(()=>[n(u(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,{name:"new_password",rules:[{required:!0,message:u(o)("message.pleaseEnterNewPassword")},{min:6,message:u(o)("message.PasswordLength"),trigger:"blur"}]},{default:a(()=>[n(i,{value:e.value.new_password,"onUpdate:value":y[1]||(y[1]=b=>e.value.new_password=b),placeholder:u(o)("message.pleaseEnterNewPassword")},{prefix:a(()=>[n(u(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,{name:"confirm_password",rules:[{required:!0,message:u(o)("message.PleaseEnterConfirmPassword")},{min:6,message:u(o)("message.PasswordLength"),trigger:"blur"}]},{default:a(()=>[n(i,{value:e.value.confirm_password,"onUpdate:value":y[2]||(y[2]=b=>e.value.confirm_password=b),placeholder:u(o)("message.PleaseEnterConfirmPassword")},{prefix:a(()=>[n(u(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,null,{default:a(()=>[n($,{class:"w100%",type:"primary","html-type":"submit"},{default:a(()=>[A(M(u(o)("setting.confirm")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}},xa={__name:"UserAvatar",setup(p){const{t:o}=X(),s=Ze(),e=l(()=>s.userInfo),c=B(!1),d=()=>{s.logout()},m=()=>{c.value=!0};return(y,i)=>{const _=_e,$=ve,f=qe,b=We;return t(),O("div",null,[n(f,{class:"cp"},{overlay:a(()=>[n($,null,{default:a(()=>[n(_,{onClick:m},{default:a(()=>[A(M(u(o)("setting.changePassword")),1)]),_:1}),n(_,{onClick:d},{default:a(()=>[A(M(u(o)("setting.logout")),1)]),_:1})]),_:1})]),default:a(()=>[j("span",null,M(e.value.user&&e.value.user.username||"admin"),1)]),_:1}),n(b,{open:c.value,"onUpdate:open":i[0]||(i[0]=L=>c.value=L),title:u(o)("setting.changePassword")},{footer:a(()=>i[1]||(i[1]=[])),default:a(()=>[n(Sa)]),_:1},8,["open","title"])])}}},Ta={class:"flex-cc flex-1"},ge={__name:"LayoutHeader",props:{collapsed:{type:Boolean}},emits:["update:collapsed"],setup(p,{emit:o}){X(),Y();const s=K(),e=s.layoutSetting,c=l(()=>e.layout==="sidemenu"),d=l(()=>e.layout==="topmenu"),m=l(()=>e.layout==="mixinmenu"),y=l(()=>e.showBreadcrumb);l(()=>e.showSearchMenu),l(()=>e.showLockScreen),l(()=>e.showFullScreen),l(()=>e.showSetting),l(()=>e.showRefreshReset),l(()=>e.locale);const i=l(()=>e.sidemenuWidth),_=l(()=>s.headerBackground),$=l(()=>s.headerColor),f=l(()=>s.border),b=o,L=l(()=>({height:"var(--app-header-height)",padding:c.value?"0 20px":"0 20px 0 0",background:_.value,color:$.value,borderBottom:f.value}));return(v,g)=>{const w=xe,x=Qt;return t(),r(x,{class:"flex-bc",style:q(L.value)},{default:a(()=>[c.value?T("",!0):(t(),O("div",{key:0,style:q({width:`${i.value}px`})},[ce(v.$slots,"title")],4)),d.value?T("",!0):(t(),O("div",{key:1,style:q({paddingLeft:m.value?"20px":0})},[ce(v.$slots,"left"),d.value?T("",!0):(t(),r(w,{key:0,size:20},{default:a(()=>[j("span",{class:"cursor-pointer",onClick:g[0]||(g[0]=()=>b("update:collapsed",!p.collapsed))},[(t(),r(be(p.collapsed?u(Pt):u(Rt))))]),y.value?(t(),r(ya,{key:0})):T("",!0)]),_:1}))],4)),j("div",Ta,[ce(v.$slots,"menu")]),j("div",null,[n(w,{size:20},{default:a(()=>[n(xa)]),_:1})])]),_:3},8,["style"])}}},Ca={href:"http://www.easydarwin.org",target:"_blank"},we={__name:"LayoutFooter",setup(p){const o=Y(),s=l(()=>o.systemTime),e=K(),c=l(()=>e.layoutSetting.copyright);return(d,m)=>{const y=pe,i=ea;return t(),r(i,{style:{padding:"0 20px 20px 20px"}},{default:a(()=>[n(y,{class:"text-center",bodyStyle:{padding:"10px"}},{default:a(()=>[A(" Copyright © 2012~"+M(s.value.year)+" ",1),j("a",Ca,"www."+M(c.value)+".org",1)]),_:1})]),_:1})}}},$a={key:1,style:{display:"inline-block"}},Ie={__name:"TabsOperator",props:{tabItem:{type:Object,required:!0},isExtra:{type:Boolean,default:!1}},setup(p,{expose:o}){const s=p,{t:e}=X(),c=le(),d=oe(),m=Y(),y=!1,i=l(()=>{var R;return(R=m.getCurrentTab)==null?void 0:R.fullPath}),_=l(()=>m.getTabsList),f=K().layoutSetting,b=l(()=>f.tabsIcon),L=R=>d.currentRoute.value.matched.some(C=>C.name===R.name),v=()=>{d.replace({name:"Refresh",path:u(c).fullPath})},g=()=>{if(_.value.length===1)return de.warning(e("message.lastPageCannotBeClosed"));m.closeCurrentTab(s.tabItem)};o({removeTab:g});const w=()=>{m.closeLeftTabs(s.tabItem),!L(s.tabItem)&&d.replace(s.tabItem.fullPath)},x=()=>{m.closeRightTabs(s.tabItem),!L(s.tabItem)&&d.replace(s.tabItem.fullPath)},S=()=>{m.closeOtherTabs(s.tabItem),!L(s.tabItem)&&d.replace(s.tabItem.fullPath)},D=()=>{m.closeAllTabs(),d.replace("/")},z=async()=>{{console.warn("仅在开发环境有效");return}};return(R,C)=>{const I=_e,E=Ge,G=ve,N=qe;return t(),r(N,{trigger:[p.isExtra?"click":"contextmenu"]},{overlay:a(()=>[n(G,{style:{"user-select":"none"}},{default:a(()=>[n(I,{key:"1",disabled:i.value!==p.tabItem.fullPath,onClick:v},{default:a(()=>[n(u(Ke)),C[1]||(C[1]=A(" 重新加载 "))]),_:1},8,["disabled"]),n(I,{key:"2",onClick:g},{default:a(()=>[n(u(Ft)),C[2]||(C[2]=A(" 关闭标签页 "))]),_:1}),n(E,{class:"m0"}),n(I,{key:"3",onClick:w},{default:a(()=>[n(u(Ot)),C[3]||(C[3]=A(" 关闭左侧标签页 "))]),_:1}),n(I,{key:"4",onClick:x},{default:a(()=>[n(u(Ut)),C[4]||(C[4]=A(" 关闭右侧标签页 "))]),_:1}),n(E,{class:"m0"}),n(I,{key:"5",onClick:S},{default:a(()=>[n(u(De)),C[5]||(C[5]=A(" 关闭其他标签页 "))]),_:1}),n(I,{key:"6",onClick:D},{default:a(()=>[n(u(At)),C[6]||(C[6]=A(" 关闭全部标签页 "))]),_:1}),u(y)?(t(),O(H,{key:0},[n(E,{class:"m0"}),n(I,{key:"7",onClick:z},{default:a(()=>[n(u(De)),C[7]||(C[7]=A(" 打开页面文件 "))]),_:1})],64)):T("",!0)]),_:1})]),default:a(()=>{var J;return[p.isExtra?(t(),O("span",{key:0,class:"cursor-pointer",onClick:C[0]||(C[0]=Tt(()=>{},["prevent"]))},[n(u(Mt))])):(t(),O("div",$a,[b.value?(t(),r(u(te),{key:0,class:"iconify anticon",icon:p.tabItem.meta.icon},null,8,["icon"])):T("",!0),j("span",null,M(u(e)((J=p.tabItem.meta)==null?void 0:J.title)),1)]))]}),_:1},8,["trigger"])}}},La={class:"tabs-view"},Pa={__name:"LayoutTabs",setup(p){const o=le(),s=oe(),e=Y(),d=K().layoutSetting,m=l(()=>d.showHeader),y=l(()=>d.showTabs),i=l(()=>d.showSearchMenu),_=l(()=>d.showFullScreen),$=l(()=>d.showLockScreen),f=l(()=>d.showSetting),b=l(()=>d.showRefreshReset),L=B(o.fullPath);ae(()=>o.fullPath,R=>{L.value=R});const v={},g=R=>{Object.is(o.fullPath,R)||s.push(R)},w=(R,C)=>{var I;C==="remove"&&((I=v[R])==null||I.removeTab())},x=l(()=>d.algorithm==="darkAlgorithm"?"black":"white"),S=l(()=>`${d.borderRadius}px`),D=l(()=>d.algorithm==="darkAlgorithm"?"1px solid black":"1px solid #eee"),z=B({margin:0,padding:"5px 20px",userSelect:"none",background:x,"--border-radius":S,"--border":D});return(R,C)=>{const I=ta,E=Ge,G=me,N=xe,J=aa;return t(),O("div",La,[y.value?(t(),r(J,{key:0,class:"tabs",type:"editable-card",activeKey:L.value,"onUpdate:activeKey":C[2]||(C[2]=V=>L.value=V),hideAdd:!0,tabBarGutter:5,tabBarStyle:z.value,onChange:g,onEdit:w},{rightExtra:a(()=>[n(N,null,{split:a(()=>[n(E,{type:"vertical"})]),default:a(()=>[n(Ie,{tabItem:u(o),isExtra:!0},null,8,["tabItem"]),!m.value&&i.value?(t(),r(ba,{key:0})):T("",!0),!m.value&&$.value?(t(),r(G,{key:1,title:"锁屏"},{default:a(()=>[n(u(ie),{onClick:C[0]||(C[0]=V=>u(e).setLockScreenState(!0))})]),_:1})):T("",!0),!m.value&&_.value?(t(),r(ha,{key:2})):T("",!0),!m.value&&b.value?(t(),r(G,{key:3,title:"刷新重置"},{default:a(()=>[n(u(Ke),{onClick:C[1]||(C[1]=V=>u(e).clearCacheReload())})]),_:1})):T("",!0),!m.value&&f.value?(t(),r(Te,{key:4})):T("",!0)]),_:1})]),default:a(()=>[(t(!0),O(H,null,W(u(e).getTabsList,V=>(t(),r(I,{key:V.fullPath},{tab:a(()=>[n(Ie,{ref_for:!0,ref:h=>v[V.fullPath]=h,tabItem:V},null,8,["tabItem"])]),_:2},1024))),128))]),_:1},8,["activeKey","tabBarStyle"])):T("",!0),ce(R.$slots,"default",{},void 0,!0)])}}},ke=Se(Pa,[["__scopeId","data-v-b8cf4cbc"]]),Ra={__name:"SideMenuLayout",setup(p){const o=B(!1),s=K(),e=s.layoutSetting,c=l(()=>e.sidemenuWidth),d=l(()=>e.menuTheme),m=l(()=>e.showTitle),y=l(()=>e.showHeader),i=l(()=>e.showFooter),_=l(()=>e.watermark),$=l(()=>e.watermarkArea==="content"),f=l(()=>e.watermarkText),b=l(()=>s.border);return(L,v)=>{const g=Je,w=se,x=fe,S=ue;return t(),r(S,{class:"h100vh overflow-hidden"},{default:a(()=>[n(g,{collapsed:o.value,"onUpdate:collapsed":v[0]||(v[0]=D=>o.value=D),width:c.value,collapsedWidth:80,collapsible:!0,trigger:null,theme:d.value,style:q({borderRight:b.value})},{default:a(()=>[m.value?(t(),r(ye,{key:0,collapsed:o.value},null,8,["collapsed"])):T("",!0),n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed","width","theme","style"]),n(S,null,{default:a(()=>[y.value?(t(),r(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":v[1]||(v[1]=D=>o.value=D)},null,8,["collapsed"])):T("",!0),n(x,null,{default:a(()=>[n(ke),_.value&&$.value?(t(),r(w,{key:0,content:f.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1}))]),_:1}),i.value?(t(),r(we,{key:1})):T("",!0)]),_:1})]),_:1})}}},Fa={__name:"TopMenuLayout",setup(p){const o=B(!1),e=K().layoutSetting,c=l(()=>e.showTitle),d=l(()=>e.showHeader),m=l(()=>e.showFooter),y=l(()=>e.watermark),i=l(()=>e.watermarkArea==="content"),_=l(()=>e.watermarkText);return($,f)=>{const b=se,L=fe,v=ue;return t(),r(v,{class:"h100vh overflow-hidden"},{default:a(()=>[d.value?(t(),r(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":f[0]||(f[0]=g=>o.value=g)},{title:a(()=>[c.value?(t(),r(ye,{key:0,collapsed:o.value},null,8,["collapsed"])):T("",!0)]),menu:a(()=>[n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed"])):T("",!0),n(L,null,{default:a(()=>[n(ke),y.value&&i.value?(t(),r(b,{key:0,content:_.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1}))]),_:1}),m.value?(t(),r(we,{key:1})):T("",!0)]),_:1})}}},Oa={__name:"MixinMenuLayout",setup(p){const o=B(!1),s=K(),e=s.layoutSetting,c=l(()=>e.menuTheme),d=l(()=>e.showTitle),m=l(()=>e.showHeader),y=l(()=>e.showFooter),i=l(()=>e.sidemenuWidth),_=l(()=>e.watermark),$=l(()=>e.watermarkArea==="content"),f=l(()=>e.watermarkText),b=l(()=>s.border);return(L,v)=>{const g=Je,w=se,x=fe,S=ue;return t(),r(S,{class:"h100vh overflow-hidden"},{default:a(()=>[m.value?(t(),r(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":v[0]||(v[0]=D=>o.value=D)},{title:a(()=>[d.value?(t(),r(ye,{key:0})):T("",!0)]),_:1},8,["collapsed"])):T("",!0),n(S,null,{default:a(()=>[n(g,{collapsed:o.value,"onUpdate:collapsed":v[1]||(v[1]=D=>o.value=D),width:i.value,theme:c.value,collapsedWidth:80,collapsible:!0,trigger:null,style:q({borderRight:b.value})},{default:a(()=>[n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed","width","theme","style"]),n(S,null,{default:a(()=>[n(x,null,{default:a(()=>[n(ke),_.value&&$.value?(t(),r(w,{key:0,content:f.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1}))]),_:1}),y.value?(t(),r(we,{key:0})):T("",!0)]),_:1})]),_:1})]),_:1})}}},Ua={__name:"MobileDeviceLayout",setup(p){const o=B(!1),e=K().layoutSetting,c=l(()=>e.sidemenuWidth),d=l(()=>e.showTitle),m=l(()=>e.showHeader),y=l(()=>e.showFooter),i=l(()=>e.watermark),_=l(()=>e.watermarkArea==="content"),$=l(()=>e.watermarkText);return(f,b)=>{const L=Ve,v=se,g=fe,w=ue;return t(),r(w,null,{default:a(()=>[n(L,{open:o.value,"onUpdate:open":b[0]||(b[0]=x=>o.value=x),placement:"left",bodyStyle:{padding:0},width:c.value,closable:!1},{default:a(()=>[d.value?(t(),r(ye,{key:0,collapsed:!1})):T("",!0),n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["open","width"]),m.value?(t(),r(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":b[1]||(b[1]=x=>o.value=x)},null,8,["collapsed"])):T("",!0),n(g,null,{default:a(()=>[n(ke),i.value&&_.value?(t(),r(v,{key:0,content:$.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1}))]),_:1}),y.value?(t(),r(we,{key:1})):T("",!0)]),_:1})}}},Uo={__name:"LayoutDefault",setup(p){const s=K().layoutSetting,e=l(()=>s.layout==="sidemenu"),c=l(()=>s.layout==="topmenu"),d=l(()=>s.layout==="mixinmenu"),m=l(()=>s.onlyShowContent),y=Y(),i=l(()=>y.device);return(_,$)=>m.value?(t(),r(ia,{key:1})):(t(),O(H,{key:0},[i.value==="desktop"?(t(),O(H,{key:0},[e.value?(t(),r(Ra,{key:0})):c.value?(t(),r(Fa,{key:1})):d.value?(t(),r(Oa,{key:2})):T("",!0)],64)):i.value==="mobile"?(t(),r(Ua,{key:1})):T("",!0)],64))}};export{Uo as default};
