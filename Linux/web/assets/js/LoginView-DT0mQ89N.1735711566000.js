import{u as Y}from"./index-BZNXQtYc.1735711566000.js";import"./dayjs-B8XocIVj.1735711566000.js";/* empty css                                                                                    */import{u as K,a as W}from"./user-CIHZcNMc.1735711566000.js";import"./request-YsyQPLWC.1735711566000.js";import{u as P}from"./vue-i18n-uJR4hMNF.1735711566000.js";import{d as z,a as J,w as G,j as M,K as Q,W as y,Z as _,_ as n,a1 as H,a2 as x,a3 as N,x as T,E as V,G as X,r as D,V as Z,X as l,c as p,u as S,J as q,$ as O,f as I}from"./@vue-Bxslm7sw.1735711566000.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.1735711566000.js";import{a3 as $,K as ee}from"./@ant-design-BLetnoCm.1735711566000.js";import{I as te,x as oe,w as se,B as ne,Y as ie,F as ae,m as re}from"./ant-design-vue-DoWxoWwg.1735711566000.js";import"./nprogress-CLSsUHm1.1735711566000.js";import"./call-bind-9I5n-WuC.1735711566000.js";import"./get-intrinsic-CCpWxmPk.1735711566000.js";import"./es-errors-DzOT6E3C.1735711566000.js";import"./gopd-fcd2-aIC.1735711566000.js";import"./es-define-property-bDCdrV83.1735711566000.js";import"./has-symbols-BaUvM3gb.1735711566000.js";import"./dunder-proto-0l1vuzli.1735711566000.js";import"./call-bind-apply-helpers-0RM3uiXS.1735711566000.js";import"./function-bind-CHqF18-c.1735711566000.js";import"./hasown-DByPsmSW.1735711566000.js";import"./set-function-length-BtQInkhp.1735711566000.js";import"./define-data-property-MfCsHmXW.1735711566000.js";import"./has-property-descriptors-Dq-3HQZp.1735711566000.js";/* empty css                                  */import"./pinia-1a_NKH_A.1735711566000.js";import"./vue-demi-Dq6ymT-8.1735711566000.js";import"./pinia-plugin-persistedstate-n2tMOXAx.1735711566000.js";import"./vue-router-DjNbiwhF.1735711566000.js";import"./lodash-es-BtLQVgmQ.1735711566000.js";import"./@iconify-B0GEP3fu.1735711566000.js";import"./@babel-BiFW4_mA.1735711566000.js";import"./@ctrl-DOFZgDuz.1735711566000.js";import"./resize-observer-polyfill-B1PUzC5B.1735711566000.js";import"./throttle-debounce-CUWDS_la.1735711566000.js";import"./vue-types-C5fUfLeo.1735711566000.js";import"./dom-align-CRCehRfe.1735711566000.js";import"./async-validator-DKvM95Vc.1735711566000.js";import"./scroll-into-view-if-needed--Yz0kGe5.1735711566000.js";import"./compute-scroll-into-view-1gs_hJI2.1735711566000.js";import"./@emotion-BtrR-yrm.1735711566000.js";import"./stylis-OW4gUFyn.1735711566000.js";import"./@intlify-BG2mqeYI.1735711566000.js";import"./crypto-js-oA4IVPzm.1735711566000.js";import"./axios-upsvKRUO.1735711566000.js";import"./qs-Dl3fWgBH.1735711566000.js";import"./side-channel-DffzUMpz.1735711566000.js";import"./object-inspect-DYmWqAa6.1735711566000.js";const F="/assets/vertical_line-CjxtohBl.png",le="/assets/arrow_left-CCBxHEgy.png",de="/assets/circle-B60PCPkF.png",ce="/assets/arrow_right-CcJsY1Ck.png",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADWElEQVRYR8VXSWsUQRT+Xme7eQjEBSPoUYN60JMgBKK4ZCOi+QPquN+7e6YnnemZrj67G+MfiKBk0wgKwYsH9aASPRowoiKIeMtg5knNpJOaTvcsicP0sfrVe19976uqrwh1/qjO9VEVgFgs1tTauvkwEXUBtIWZt8oFENF3gH8Q0cumJno1PDz8p9KFVQRA160DmoYYMwYAtJVJngUwQ0TXXTf1ohyQsgBM07rHjJiSaB7AFDM+EfGCHGemdiLsBtADYKcfS4RR13XOlwJREoBhJN4BtK9AMyaZeUSI9FSphIaR6CEiyVZvIY7fC5HeHzUnEoBhWOxPYqZBz0s9LEen+l/Xk2eIeMwfE8IJrRU6qOvWEyKcKExu6BDC/lhNcT/WMOw9wNJcoU146nnOyWCeNQDUnmtarj2TyXxdT3F/Tjwe357LaXmtEGHEdZ0Lar4iAFLtRHhTQJw75XmZxxsp7s/V9fgAkfZomYmDnue8XRGqWsBfvRSc6zp9xT1NdALoJGoci2qJpJz57yCAWc9LzwZyT0hhBllYYcC27ebFxaVvAFoB7g2qXdcTNhENAZgDGgaDIJb7LUXXwczDnpe2VQBydwA0CeBXS0vDNtu25XmxehKaZrKbmeUWWxDC2RGkXi0QBFHqXzEI6wuAdiLqcd3UdBEAw7AyAEwi3HVd51JY78MKFeKW8iuPYsfPZZrWHWZcBOAK4cQDAJKjAJ9lxhXPc25HiW8tiHxk2eIySNety0S4BdADIVLnigDoujVFhG6A+4VIT5RSfwCEDA3Vxdo2JvoAGmfGtOc58the1UDdARhGnVvgixDATSGca7UQoWFYNwBcDRWhaSaPMfMMgHkhnF012oaf5XVNRMddN/WsSANDQ0ObstncTwDNNT6Iss3NWpvvmoruAsOwxgH01fIoBjAhhNMfcRcku5j5eeHSqN4DRG1d1RsQ0RHVqoVdx/eZkT8kNuIFfDCqJwizaKGGRLViG/EEqheIsmYVWrLqvYHqASQbVVkynz7Vmq3XlEZZsVARhokoxJYvEGEql8MH1ZZrGvYy5215+0ryjdpyhQn/YXK6YFhKfv/3YaKWkq4pm80dZeZDYU8zgF+3tDTO2rb9uwzIld9lX0aVJlpvXN0B/ANyrAY/RFREagAAAABJRU5ErkJggg==",ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADyUlEQVRYR8VXX4hUVRj/fXcWfQpC1DAzBIseJLGwh8DKEF2SKNuohyWjHoTAJ5Od7rlz7+517uz5rhrbQ2AkRNk+CEUWgRGGBP0Fo8AVCQuxf6ixhdGT5u754szcO96ZnZm9cxX2wDzMme/7/X7nO9+fM4QFXrTA/OhLQKUytsEYsxXAFgC3A1hBhKsiOEuEn42RX0Xog337otN5D5ZLgFKVHYDzHABLnmd9DJijzOOH2409z1uhtb6Y7vcU4Hlj60TMgXZiIvyVnPq0CP4VwRIiLAHoTkA2NMEJxxYtKg2FYfif3SuXx+4olczvAL5njup2XQW47ugzRPI6gNsSwHMimBgYkBO1Wu1stzB4XjAsgucBDCY2MwAeZo6+dV1/ExF9bveZozp3RwEJ+XsJwFUArwEzE8w8nSf+1sZ1/ZCIxq7bl9aKzCyfV4BSwUMAvkgc/yGa3ay1/iEvcdbOdYOXiPBGuicij84rwHWDT4jwmHUSoeE4rh4pQp76KOVvB+jD5Lu9/1Vdr8B1gxeI8Hb9bohY66p3I+TXRQQWZzyL1TEHlAqOAdgG4FPmqB6FIksp/3ERNKshOdB9AJ5I8eYIcN3gASKcTAz2MEcTRcitj1LBeQCre/nPEeB5/ogI7bdOxmBdP92snSipgEd6CDjJHL3SUoZKBbY+NwH4mjnaWPT0/fo1+0AaNhHZG8e1sF+govZNAa4briYym5mrbxUFK+KXaxgVAe7kUy6Xb3GcxTscx/lK671TLTlws0h64SjlbwPIlvoF5mjlAggYPQTITgA/MUf3tAiYr3SI6Dutq+WikQrDcOmVK7M/EmEpIEeYa8PtZSjzgE8zR8uLClDK3wnQIesvgl1xHB3sJeCSiLzZSuaciePq+8UFNNv8NDCzNh3t2T7QHoEbmgdZodm3AREOah3tSn/vJOAjANsTgxHm6NWip7Z+lcroU8bI0QaGTBGZrVrrP7sKsJ2QyHkSkPWN+zJDcTyezvO+tHiedz9Q+sy+GRtYMhjHteNZkDkRSFuxUsFlALfWE4VoXOuqn5ddKbUMGHgZwG4Aixvk9GynHOoqwDopFXwD4MGE+BQRHRa59i4z/91JzMiIv6ZUokEiWPI1qU2v+ZIVUJ+GIngxjqN3UmfP8/eIUDYP/iDCKWNw2T7PAdhX773Jx/5Zya7fAPKZq5PdotcyC+xAiuPwl3bjRgt1hgB5Or2W3tchUwBNEs1OZhOuk09fw8j+q7FCjKH1RLgLwN0AltneDuCiiBwnohPM0Zd586UvAXlB+7FbcAH/A4UEhDCH3H8GAAAAAElFTkSuQmCC",pe=42,ge=9,U=pe+ge*2+3,he=z({name:"SliderVerify",props:{width:{type:Number,default:300},height:{type:Number,default:220},w:{type:Number,default:60},h:{type:Number,default:60},top:{type:Number,default:60},isBorder:{type:Boolean,default:!0},imgX:{type:String,default:""},imgL:{type:String,default:""},isCloseBtn:{type:Boolean,default:!0},isReloadBtn:{type:Boolean,default:!0},isParentNode:{type:Boolean,default:!1}},emits:["ok","close","reload"],setup(e,t){const s=J({popupShow:!1,verifyResult:!1,terminal:"pc",blkTilesW:0,circleLeft:0,bgWidth:0,isTouch:!1,bgRandom:0,loading:!1,isLoad:!1}),B=()=>navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),h=()=>B()?"mobile":"pc",i=()=>{t.emit("reload"),k()},o=()=>{t.emit("close")},A=()=>document.getElementById("canvas_containe"),L=(u,C,f,b=!1)=>{s.isTouch=!0;const a=document.querySelector(`#${C}`),r=document.querySelector(`#${f}`),g=document.querySelector("#placehold"),d=s.terminal;let c=0;const w=v=>{if(d==="pc"?c=v.x-u.x:c=v.changedTouches[0].clientX-(u.changedTouches?u.changedTouches[0].clientX:u.clientX),c<8&&(g.style.opacity="1"),c>=s.bgWidth-U||c<=-2)return!1;a.style.left=c+"px",r.style.left=c+"px",s.circleLeft=c,g.style.opacity="0"},m=(v=!0)=>{s.isTouch=!1,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",m),v&&t.emit("ok",s.circleLeft),a.style.left="0",r.style.left="0",k()};d==="pc"?(document.addEventListener("mousemove",w),document.addEventListener("mouseup",m)):(document.addEventListener("touchmove",w),document.addEventListener("touchend",m)),b&&m(!1)},k=()=>{var v;if(s.isLoad)return;s.isLoad=!0,s.loading=!0;const u=document.getElementById("bg_canvas"),C=u.getContext("2d"),f=document.getElementById("block_canvas"),b=f.getContext("2d"),a=document.getElementById("placehold");a.style.opacity="1";const r=(E,R)=>Math.floor(Math.random()*(R-E)+E),g=new Image;g.crossOrigin="Anonymous",g.src=e.imgL,g.onerror=()=>{};let d=e.width;if(e.isParentNode){const R=(v=document.getElementById("plugin-slider-verify_containe").parentElement)==null?void 0:v.getBoundingClientRect().width;R&&(d=R-20),e.isBorder&&(d=d-2)}const c=e.height;s.bgWidth=d;const w=r(U+10,d-(U+10));s.blkTilesW=w,u.width=d,u.height=c,f.width=e.w,f.height=e.h,g.onload=()=>{s.loading=!1,C.drawImage(g,0,0,d,c),s.isLoad=!1};const m=new Image;m.crossOrigin="Anonymous",m.src=e.imgX,m.onerror=()=>{},m.onload=()=>{b.drawImage(m,0,0,e.w,e.h),f.style.top=`${e.top}px`}};return G(()=>e.imgL,u=>{k()},{deep:!0}),M(()=>{k()}),{context:t,...Q(s),drag:L,close:o,reload:i,getContainer:A,setTerminal:h}}}),fe={id:"plugin-slider-verify_containe"},ve={id:"canvas_containe"},Ae={id:"bg_canvas"},we={class:"slide-box"},ye={class:"verticals"},Be={class:"arrow"},Ee={key:0,class:"operational"};function ke(e,t,s,B,h,i){return y(),_("div",fe,[n("div",{id:"slider-verify",class:H({"is-border":e.isBorder})},[n("div",{id:"verify_containe",class:H({"is-opt":e.isCloseBtn||e.isReloadBtn})},[n("div",ve,[e.loading?(y(),_("div",{key:0,class:"loading",style:x({width:`${e.width}px`,height:`${e.height}px`})},t[8]||(t[8]=[n("div",{type:"circular",vertical:""},[n("span",null,"加载中...")],-1)]),4)):N("",!0),T(n("canvas",Ae,null,512),[[V,!e.loading]]),T(n("canvas",{id:"block_canvas",onMousedown:t[0]||(t[0]=X(o=>e.drag(o,"block_canvas","circle"),["prevent"])),onTouchstart:t[1]||(t[1]=X(o=>{e.terminal="mobile",e.drag(o,"block_canvas","circle")},["prevent"])),onClick:t[2]||(t[2]=o=>{e.terminal=e.setTerminal(),e.drag(o,"block_canvas","circle",!0)})},null,544),[[V,!e.loading]])]),n("div",we,[n("div",{id:"circle",onMousedown:t[3]||(t[3]=X(o=>e.drag(o,"circle","block_canvas"),["prevent"])),onTouchstart:t[4]||(t[4]=X(o=>{e.terminal="mobile",e.drag(o,"circle","block_canvas")},["prevent"])),onClick:t[5]||(t[5]=o=>{e.drag(o,"circle","block_canvas",!0)})},[T(n("div",ye,t[9]||(t[9]=[n("img",{src:F,alt:"png"},null,-1),n("img",{src:F,alt:"png"},null,-1),n("img",{src:F,alt:"png"},null,-1)]),512),[[V,!e.isTouch]]),T(n("div",Be,t[10]||(t[10]=[n("img",{src:le,alt:"png"},null,-1),n("img",{src:de,class:"circle",alt:"png"},null,-1),n("img",{src:ce,alt:"png"},null,-1)]),512),[[V,e.isTouch]])],32),t[11]||(t[11]=n("span",{id:"placehold"},"拖动滑块完成拼图",-1))]),e.isCloseBtn||e.isReloadBtn?(y(),_("div",Ee,[e.isCloseBtn?(y(),_("img",{key:0,src:me,alt:"",onClick:t[6]||(t[6]=(...o)=>e.close&&e.close(...o))})):N("",!0),e.isReloadBtn?(y(),_("img",{key:1,src:ue,alt:"",onClick:t[7]||(t[7]=(...o)=>e.reload&&e.reload(...o))})):N("",!0)])):N("",!0)],2)],2)])}const Ce=j(he,[["render",ke],["__scopeId","data-v-5ba3beaa"]]),be={__name:"LoginForm",setup(e){const{t}=P(),s=K(),B=D(null),h=D(!1),i=D({captcha_id:0,master:"",tile:"",w:0,h:0,x:0,y:0,expired:0}),o=D({username:"",password:"",captcha:"",captcha_id:0}),A=()=>{W.captcha({}).then(a=>{a.status==200&&(i.value=a.data)})},L=a=>{o.value.captcha_id=i.value.captcha_id,o.value.captcha=`${a},${i.value.y}`,h.value=!1,f()},k=()=>{h.value=!1},u=()=>{A()},C=()=>{i.value.captcha_id==0?f():h.value=!0},f=()=>{B.value.validate().then(()=>{s.login(o.value).catch(a=>{A()})}).catch(a=>{console.log("error",a)})},b=a=>{console.log("Failed:",a)};return A(),(a,r)=>{const g=te,d=oe,c=se,w=ne,m=ie,v=ae;return y(),Z(v,{ref_key:"formRef",ref:B,model:o.value,onFinishFailed:b},{default:l(()=>[p(d,{name:"username",rules:[{required:!0,message:S(t)("message.pleaseEnterUsername")}]},{default:l(()=>[p(g,{value:o.value.username,"onUpdate:value":r[0]||(r[0]=E=>o.value.username=E),placeholder:"admin"},{prefix:l(()=>[p(S($))]),_:1},8,["value"])]),_:1},8,["rules"]),p(d,{name:"password",rules:[{required:!0,message:S(t)("message.pleaseEnterPassword")}]},{default:l(()=>[p(c,{value:o.value.password,"onUpdate:value":r[1]||(r[1]=E=>o.value.password=E),placeholder:"admin",onPressEnter:C},{prefix:l(()=>[p(S(ee))]),_:1},8,["value"])]),_:1},8,["rules"]),p(d,null,{default:l(()=>[p(m,{open:h.value},{cancelButton:l(()=>r[2]||(r[2]=[])),okButton:l(()=>r[3]||(r[3]=[])),icon:l(()=>r[4]||(r[4]=[])),title:l(()=>[i.value.captcha_id!=0?(y(),Z(Ce,{key:0,imgL:i.value.master,imgX:i.value.tile,width:i.value.width,height:i.value.height,w:i.value.w,h:i.value.h,top:i.value.y,onReload:u,onClose:k,onOk:L},null,8,["imgL","imgX","width","height","w","h","top"])):N("",!0)]),default:l(()=>[p(w,{class:"w100%",type:"primary",onClick:C},{default:l(()=>[q(O(S(t)("setting.login")),1)]),_:1})]),_:1},8,["open"])]),_:1})]),_:1},8,["model"])}}},_e={class:"text-center",style:{"font-size":"20px"}},Bt={__name:"LoginView",setup(e){const t=Y().layoutSetting;I(()=>t.showSetting);const s=I(()=>t.algorithm),B=I(()=>t.title),h=I(()=>({width:"100%",height:"100%",backgroundColor:s.value==="darkAlgorithm"?"#001529":"#eee",position:"relative"}));return(i,o)=>{const A=re;return y(),Z(A,{class:"w100vw h100vh",bodyStyle:h.value},{default:l(()=>[p(A,{class:"pos-absolute w400px",style:{top:"calc(50% - 240px)",left:"calc(50% - 200px)"}},{title:l(()=>[n("div",_e,O(B.value),1)]),default:l(()=>[p(be)]),_:1})]),_:1},8,["bodyStyle"])}}};export{Bt as default};
