import{u as H,l as ut,t as Oe,a as rt,b as Ue}from"./index-CxiSgu_q.1737110241000.js";import{d as ct}from"./pinia-D6fI-ZdN.1737110241000.js";import{u as oe,b as le,R as it}from"./vue-router-Cyqq3sEN.1737110241000.js";import{u as X}from"./vue-i18n-Dpn4gLhm.1737110241000.js";import{u as dt,a as pt,b as mt,c as _t,d as vt,e as ft,o as re}from"./@vueuse-Zjwd5r6g.1737110241000.js";import{d as ee}from"./dayjs-Dc61Wt7u.1737110241000.js";import{r as B,w as ae,f as l,W as t,Z as O,c as n,X as a,u as s,_ as j,J as A,$ as M,F as K,a0 as J,V as r,a1 as je,a2 as W,a3 as T,a4 as yt,z as ht,a5 as Ae,a6 as be,x as Me,E as Be,n as He,a7 as gt,d as wt,s as kt,a8 as ce,G as bt}from"./@vue-BfhzGpZF.1737110241000.js";/* empty css                                                                                    */import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.1737110241000.js";import{G as St,H as xt,J as Tt,S as Ee,K as ie,N as Ct,O as Lt,T as Ke,b as $t,V as Pt,X as Rt,Y as De,Z as Ft,D as Ot}from"./@ant-design-DWAmKvXw.1737110241000.js";import{c as de,d as pe,D as Ut,e as At,T as Mt,I as ze,f as Bt,g as Et,h as Dt,S as It,i as jt,j as Ht,B as Ne,k as Ve,m as me,_ as se,n as ue,o as _e,M as ve,p as Kt,q as zt,r as Nt,s as Vt,t as xe,u as We,v as Wt,w as qt,F as Gt,x as qe,L as Jt,y as Zt,z as Ge,A as Xt,E as Yt,G as Je,H as fe}from"./ant-design-vue-YDCKpw9Q.1737110241000.js";import{u as Qt}from"./base-Dl0F9Ilj.1737110241000.js";import{I as te}from"./@iconify-C9sTFQfd.1737110241000.js";import{u as Ze}from"./user-BYV1s93I.1737110241000.js";import"./nprogress-DU86DrGV.1737110241000.js";import"./call-bind-D8HxU8eU.1737110241000.js";import"./get-intrinsic-DHvDm5IU.1737110241000.js";import"./es-errors-DzOT6E3C.1737110241000.js";import"./gopd-fcd2-aIC.1737110241000.js";import"./es-define-property-bDCdrV83.1737110241000.js";import"./has-symbols-BaUvM3gb.1737110241000.js";import"./dunder-proto-B-2Bgiap.1737110241000.js";import"./call-bind-apply-helpers-DdvJjOyj.1737110241000.js";import"./function-bind-CHqF18-c.1737110241000.js";import"./hasown-DWtZAXcf.1737110241000.js";import"./set-function-length-C9mYOxiX.1737110241000.js";import"./define-data-property-Dy2YOX90.1737110241000.js";import"./has-property-descriptors-Bu2BqhW-.1737110241000.js";/* empty css                                  */import"./pinia-plugin-persistedstate-n2tMOXAx.1737110241000.js";import"./lodash-es-BtLQVgmQ.1737110241000.js";import"./@babel-BiFW4_mA.1737110241000.js";import"./@ctrl-DOFZgDuz.1737110241000.js";import"./resize-observer-polyfill-B1PUzC5B.1737110241000.js";import"./throttle-debounce-CUWDS_la.1737110241000.js";import"./vue-types-C5fUfLeo.1737110241000.js";import"./dom-align-CRCehRfe.1737110241000.js";import"./async-validator-DKvM95Vc.1737110241000.js";import"./scroll-into-view-if-needed-DrbnJgYN.1737110241000.js";import"./compute-scroll-into-view-1gs_hJI2.1737110241000.js";import"./@emotion-BtrR-yrm.1737110241000.js";import"./stylis-OW4gUFyn.1737110241000.js";import"./@intlify-BG2mqeYI.1737110241000.js";import"./vue-demi-Dq6ymT-8.1737110241000.js";import"./request-ZxzhHWJh.1737110241000.js";import"./axios-upsvKRUO.1737110241000.js";import"./qs-B8H1bFrO.1737110241000.js";import"./side-channel-D6pqONTP.1737110241000.js";import"./object-inspect-C-jZde8o.1737110241000.js";import"./crypto-js-C6P57YDX.1737110241000.js";import"./base-DpfWbqA7.1737110241000.js";const Y=ct("system",()=>{const{t:m}=X(),o=oe(),u=le(),e=H(),c=B(o.options.routes.find(k=>k.name==="Layout").children.filter(k=>k.name!=="Refresh")),d=B([]),p=(k,F)=>{k.forEach(U=>{U.searchTitle=m(U.meta.title),U.children?p(U.children,U):(F&&(U.searchTitle=`${F.searchTitle} / ${m(U.meta.title)}`),d.value.push(U))})};p(c.value);const y=(k,F)=>{switch(k){case"add":c.value.push(F);break;case"delete":c.value=c.value.filter(U=>U.name!==F.name);break}d.value=[],p(c.value)};ae(()=>c.value,()=>{p(c.value)});const i=B([]),_=l(()=>i.value.filter(k=>o.hasRoute(k.name))),L=l(()=>i.value.find(k=>k.fullPath===u.fullPath));let f=B([]);const b=k=>{typeof k=="string"?!f.value.includes(k)&&f.value.push(k):k.forEach(F=>{F&&!f.value.includes(F)&&f.value.push(F)})},$=k=>{typeof k=="string"?f.value=f.value.filter(F=>F!==k):f.value=f.value.filter(F=>!k.includes(F))},v=()=>{f.value=[]},g=k=>({...k,matched:k.matched.map(F=>{const{meta:U,path:Q,name:ne}=F;return{meta:U,path:Q,name:ne}})}),w=k=>{const F=o.getRoutes(),U=k.reduce((Q,ne)=>{var $e,Pe,Re;if(ne.name&&o.hasRoute(ne.name)){const Fe=(Re=(Pe=($e=F.find(st=>st.name===ne.name))==null?void 0:$e.components)==null?void 0:Pe.default)==null?void 0:Re.name;Fe&&Q.push(Fe)}return Q},[]);$(U)},x=k=>{i.value.some(U=>U.fullPath===k.fullPath)||i.value.push(g(k))},S=k=>{const F=i.value.findIndex(Q=>Q.fullPath===k.fullPath),U=Object.is(L.value,i.value[F]);if(w(i.value.splice(F,1)),U){const Q=i.value[Math.max(0,i.value.length-1)];o.push(Q)}},D=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);w(i.value.splice(0,F))},z=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);w(i.value.splice(F+1))},R=k=>{const F=i.value.findIndex(U=>U.fullPath===k.fullPath);if(F!==-1){const U=i.value.splice(F,1);w(i.value),i.value=U}},C=()=>{w(i.value),i.value=[]};ae(()=>u.fullPath,()=>{["Login","NotFound","Refresh",void 0].includes(u.name)||x(u)},{immediate:!0}),window.addEventListener("beforeunload",()=>{e.layoutSetting.cacheTabs||(i.value=[L.value||i.value[0]].filter(Boolean))});const I=B({}),E=["日","一","二","三","四","五","六"],q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];dt(()=>{I.value={year:ee().year(),month:ee().month()+1,day:ee().date(),hour:ee().hour(),minute:ee().minute(),second:ee().second(),week:e.layoutSetting.language==="zhCN"?`星期${E[ee().day()]}`:q[ee().day()]}});const N=B(""),G=B(!1),V=l(()=>e.layoutSetting.lockScreenTime*60*60),h=B(0);setInterval(()=>{h.value+=1},1e3);const P=k=>{G.value=k,k||(Xe(),h.value=0)},Ce=k=>{N.value=encodeURI(k)},Xe=()=>{N.value=""},Ye=k=>encodeURI(k)===N.value,Qe=()=>decodeURI(N.value);ae(V,()=>{h.value=0}),ae(h,()=>{h.value>=V.value&&e.layoutSetting.showLockScreen&&(P(!0),Ce("123456"))});const{charging:et,chargingTime:tt,dischargingTime:at,level:ot}=pt(),nt=B({charging:et,chargingTime:tt,dischargingTime:at,level:ot}),lt=mt(),Le=B("desktop");return _t(document.body,k=>{const F=k[0],{width:U}=F.contentRect;Le.value=U<992?"mobile":"desktop"}),{menus:c,menuList:d,tabsList:i,getTabsList:_,getCurrentTab:L,keepAliveList:f,systemTime:I,lockScreenState:G,lockScreenPassword:N,battery:nt,online:lt,device:Le,updateMenus:y,addTabs:x,closeCurrentTab:S,closeLeftTabs:D,closeRightTabs:z,closeOtherTabs:R,closeAllTabs:C,addKeepAliveList:b,removeKeepAliveList:$,clearKeepAliveList:v,setLockScreenState:P,setLockScreenPassword:Ce,verifyLockScreenPassword:Ye,decodeLockScreenPassword:Qe,clearCacheReload:()=>{localStorage.clear(),sessionStorage.clear(),location.reload(),c.value=o.options.routes.find(k=>k.name==="Layout").children.filter(k=>k.name!=="Refresh"),d.value=[],p(c.value),G.value=!1,N.value="",i.value=[],f.value=[]}}}),ea=["onClick"],ta={class:"w60px h60px","aria-hidden":"true"},aa=["xlink:href"],oa={key:0,class:"style-checkbox-item"},na={class:"flex-ac"},la={__name:"LayoutSetting",setup(m){const{t:o}=X(),u=H(),e=l(()=>u.layoutSetting),c=l(()=>u.layoutSetting.colorPrimary),d=l(()=>({"--custom-color":c.value})),p=Y(),y=B(!1),i=()=>{y.value=!0},_=v=>{u.updateLayoutSetting({layout:v})},L=v=>{u.updateLayoutSetting({colorPrimary:v})},f=v=>c.value===v?"visible":"hidden",b=()=>{const v=JSON.stringify(e.value);navigator.clipboard.writeText(v),de.success(o("message.copySuccess"))},$=v=>{L(v.target.value)};return(v,g)=>{const w=pe,x=Ut,S=At,D=Mt,z=ze,R=Bt,C=Et,I=Dt,E=It,q=jt,N=Ht,G=Ne,V=Ve;return t(),O(K,null,[n(w,{title:s(o)("setting.projectConfig"),placement:"bottomRight"},{default:a(()=>[n(s(St),{onClick:i})]),_:1},8,["title"]),n(V,{open:y.value,"onUpdate:open":g[3]||(g[3]=h=>y.value=h),placement:"right",title:s(o)("setting.projectConfig")},{footer:a(()=>[j("div",na,[n(G,{class:"w-45%",type:"primary",onClick:b},{default:a(()=>[A(M(s(o)("setting.copy")),1)]),_:1}),n(G,{class:"w-45%",type:"primary",danger:"",onClick:s(p).clearCacheReload},{default:a(()=>[A(M(s(o)("setting.clearCacheAndReset")),1)]),_:1},8,["onClick"])])]),default:a(()=>[n(S,{title:s(o)("setting.menuLayout"),column:5},{default:a(()=>[(t(!0),O(K,null,J(s(ut),h=>(t(),r(x,{key:h.value},{default:a(()=>[n(w,{title:s(o)(h.label)},{default:a(()=>[j("div",{class:je(["style-checkbox-item",{active:e.value.layout===h.value}]),onClick:P=>_(h.value)},[(t(),O("svg",ta,[j("use",{"xlink:href":`#svg-icon-${h.value}`},null,8,aa)]))],10,ea)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1},8,["title"]),n(S,{title:s(o)("setting.themeColor"),column:s(Oe).length-1},{default:a(()=>[(t(!0),O(K,null,J(s(Oe),h=>(t(),r(x,{key:h.key},{default:a(()=>[h.tag==="checkbox"?(t(),O("div",oa,[n(w,{title:s(o)(h.title)},{default:a(()=>[n(D,{color:h.value,onClick:P=>L(h.value)},{default:a(()=>[j("span",{style:W({visibility:f(h.value)})}," ✔ ",4)]),_:2},1032,["color","onClick"])]),_:2},1032,["title"])])):T("",!0),h.tag==="input-color"?(t(),r(R,{key:1,justify:"space-between",class:"w-full flex items-center style-checkbox-item"},{default:a(()=>[A(M(s(o)("setting.customColor"))+" ",1),n(D,{color:c.value,class:"relative overflow-hidden"},{default:a(()=>[n(z,{type:"color",class:"cursor-pointer absolute top-0 left-0 w-full h-full",style:W(d.value),modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=P=>c.value=P),onInput:$},null,8,["style","modelValue"]),j("span",{style:W({visibility:f(c.value)})}," ✔ ",4)]),_:1},8,["color"])]),_:1})):T("",!0)]),_:2},1024))),128))]),_:1},8,["title","column"]),n(S,{title:s(o)("setting.pageDisplay"),column:1},{default:a(()=>[(t(!0),O(K,null,J(s(rt),h=>(t(),r(x,{key:h.value},{default:a(()=>[h.tag==="switch"?(t(),r(R,{key:0,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(h.label))+" ",1),n(C,{checked:e.value[h.value],"onUpdate:checked":P=>e.value[h.value]=P},null,8,["checked","onUpdate:checked"])]),_:2},1024)):T("",!0),h.tag==="input-number"?(t(),r(R,{key:1,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(h.label))+" ",1),n(I,{style:{width:"200px"},value:e.value[h.value],"onUpdate:value":P=>e.value[h.value]=P,min:h.min,max:h.max,"addon-after":s(o)(h.unit)},null,8,["value","onUpdate:value","min","max","addon-after"])]),_:2},1024)):T("",!0),h.tag==="input"?(t(),r(R,{key:2,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(h.label))+" ",1),n(z,{style:{width:"200px"},value:e.value[h.value],"onUpdate:value":P=>e.value[h.value]=P},null,8,["value","onUpdate:value"])]),_:2},1024)):T("",!0),h.tag==="select"?(t(),r(R,{key:3,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(h.label))+" ",1),h.value==="animation"?(t(),r(q,{key:0,style:{width:"200px"},value:e.value.animation,"onUpdate:value":g[1]||(g[1]=P=>e.value.animation=P)},{default:a(()=>[(t(!0),O(K,null,J(s(Ue),P=>(t(),r(E,{key:P.animation},{default:a(()=>[A(M(s(o)(P.name)),1)]),_:2},1024))),128))]),_:1},8,["value"])):h.value==="animationDirection"?(t(),r(q,{key:1,style:{width:"200px"},value:e.value.animationDirection,"onUpdate:value":g[2]||(g[2]=P=>e.value.animationDirection=P)},{default:a(()=>[(t(!0),O(K,null,J(s(Ue).find(P=>P.animation===e.value.animation).options,P=>(t(),r(E,{key:P},{default:a(()=>[A(M(P),1)]),_:2},1024))),128))]),_:1},8,["value"])):(t(),r(q,{key:2,style:{width:"200px"},value:e.value[h.value],"onUpdate:value":P=>e.value[h.value]=P},{default:a(()=>[(t(!0),O(K,null,J(h.options,P=>(t(),r(E,{key:P.value,value:P.value},{default:a(()=>[A(M(s(o)(P.label)),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"]))]),_:2},1024)):T("",!0),h.tag==="segmented"?(t(),r(R,{key:4,justify:"space-between",class:"w-full flex items-center"},{default:a(()=>[A(M(s(o)(h.label))+" ",1),n(N,{value:e.value[h.value],"onUpdate:value":P=>e.value[h.value]=P,options:h.options.map(P=>({value:P.value,label:s(o)(P.label)}))},null,8,["value","onUpdate:value","options"])]),_:2},1024)):T("",!0)]),_:2},1024))),128))]),_:1},8,["title"])]),_:1},8,["open","title"])],64)}}},Te=Se(la,[["__scopeId","data-v-de9767ed"]]),Z={__name:"LayoutPage",setup(m){const o=Y(),u=l(()=>o.keepAliveList),e=H().layoutSetting,c=l(()=>e.onlyShowContent),d=l(()=>e.showAnimation),p=l(()=>e.showTabs),y=l(()=>e.showHeader),i=l(()=>e.showSetting),_=B("auto"),L=l(()=>c.value?"100vh":`calc(100vh - ${e.showHeader?"var(--app-header-height)":"0px"} - ${e.showTabs?"50px":"0px"} - ${e.showFooter?"var(--app-footer-height)":"0px"})`),f=l(()=>`animate__animated animate__${e.animation}In${e.animationDirection==="Default"?"":e.animationDirection}`),b=l(()=>`animate__animated animate__${e.animation}Out${e.animationDirection==="Default"?"":e.animationDirection}`);return($,v)=>{const g=me;return t(),O("div",{class:"p20px overflow-hidden",style:W({overflow:_.value,height:L.value})},[n(s(it),null,{default:a(({Component:w,route:x})=>[(t(),r(yt,null,{fallback:a(()=>v[3]||(v[3]=[A(" 正在加载... ")])),default:a(()=>[d.value?(t(),r(ht,{key:0,mode:"out-in",appear:"","enter-active-class":f.value,"leave-active-class":b.value,onBeforeEnter:v[0]||(v[0]=S=>_.value="hidden"),onAfterEnter:v[1]||(v[1]=S=>_.value="auto"),onBeforeLeave:v[2]||(v[2]=S=>_.value="hidden")},{default:a(()=>[(t(),r(Ae,{include:u.value},[(t(),r(be(w),{key:x.fullPath}))],1032,["include"]))]),_:2},1032,["enter-active-class","leave-active-class"])):(t(),r(Ae,{key:1,include:u.value},[(t(),r(be(w),{key:x.fullPath}))],1032,["include"]))]),_:2},1024))]),_:1}),!y.value&&!p.value&&i.value?(t(),r(g,{key:0,class:"pos-fixed right--1 top-100 z-999",bodyStyle:{padding:"10px"}},{default:a(()=>[n(Te)]),_:1})):T("",!0)],4)}}},sa={__name:"OnlyShowContentLayout",setup(m){const u=H().layoutSetting,e=l(()=>u.watermark),c=l(()=>u.watermarkArea==="content"),d=l(()=>u.watermarkText),p=l(()=>u.showSetting);return(y,i)=>{const _=se,L=me,f=ue;return t(),r(f,{class:"h100vh overflow-hidden"},{default:a(()=>[e.value&&c.value?(t(),r(_,{key:0,content:d.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1})),p.value?(t(),r(L,{key:2,class:"pos-fixed right--1 top-100 z-999",bodyStyle:{padding:"10px"}},{default:a(()=>[n(Te)]),_:1})):T("",!0)]),_:1})}}},ye={__name:"LayoutTitle",props:{collapsed:{type:Boolean}},setup(m){const o=Qt(),u=oe(),e=l(()=>o.serverInfo&&o.serverInfo.version),c=H(),d=c.layoutSetting,p=l(()=>d.title),y=l(()=>c.titleColor),i=l(()=>({height:"var(--app-header-height)",color:y.value})),_=()=>{u.push({name:"Live"})};return o.getServerInfo(),(L,f)=>(t(),O("div",{class:"flex-cc overflow-hidden whitespace-nowrap font-500 text-20px cp",style:W(i.value)},[Me(j("span",null,"E",512),[[Be,m.collapsed]]),Me(j("div",{class:je([{pr24px:!m.collapsed}]),onClick:_},[A(M(p.value),1),j("sup",null,M(e.value),1)],2),[[Be,!m.collapsed]])],4))}},ua=["title"],ra={__name:"MenuItemContent",props:{item:{type:Object,default:()=>({})}},setup(m){const{t:o}=X();return(u,e)=>{var c,d,p,y;return t(),O(K,null,[(d=(c=m.item)==null?void 0:c.meta)!=null&&d.icon?(t(),r(s(te),{key:0,class:"iconify anticon",icon:m.item.meta.icon},null,8,["icon"])):T("",!0),j("span",{class:"ml10px text-14px",title:s(o)((y=(p=m.item)==null?void 0:p.meta)==null?void 0:y.title)},M(s(o)(m.item.meta.title)),9,ua)],64)}}},ca={__name:"MenuItem",props:{item:{type:Object,default:()=>({})}},setup(m){const o=oe(),u=e=>{const{outsideLink:c}=e.meta||{};c?window.open(e.path):o.push({name:e.name})};return(e,c)=>{var p;const d=_e;return t(),r(d,{key:(p=m.item)==null?void 0:p.name,onClick:c[0]||(c[0]=y=>u(m.item))},{default:a(()=>[n(ra,{item:m.item},null,8,["item"])]),_:1})}}},ia={__name:"SubMenuItem",props:{item:{type:Object,default:()=>({})}},setup(m){return(o,u)=>(t(),r(ca,{key:1,item:m.item},null,8,["item"]))}},he={__name:"LayoutMenu",props:{collapsed:{type:Boolean}},setup(m){const o=m,u=le(),e=oe(),c=B([]),d=B([]),p=Y(),y=l(()=>p.menus),_=H().layoutSetting,L=l(()=>_.layout==="topmenu"),f=l(()=>_.menuTheme),b=()=>u.meta.namePath??u.matched.slice(1).map(g=>g.name),$=g=>e.getRoutes().find(w=>w.name===g);ae(()=>o.collapsed,()=>{c.value=u.name?[u.name]:[],d.value=b()}),ae(()=>u.fullPath,()=>{c.value=u.name?[u.name]:[],d.value=b()},{immediate:!0});const v=({key:g})=>{if(g===u.name)return;const w=c.value,x=$(g),{outsideLink:S}=(x==null?void 0:x.meta)||{};x&&S&&He(()=>{c.value=w})};return(g,w)=>{const x=ve;return t(),r(x,{class:"border-none!","selected-keys":c.value,"onUpdate:selectedKeys":w[0]||(w[0]=S=>c.value=S),"open-keys":L.value?[]:d.value,mode:L.value?"horizontal":"inline",theme:f.value,collapsed:m.collapsed,collapsible:"",onClick:v},{default:a(()=>[(t(!0),O(K,null,J(y.value,S=>(t(),r(ia,{key:S.name,item:S},null,8,["item"]))),128))]),_:1},8,["selected-keys","open-keys","mode","theme","collapsed"])}}},da=(m,o=1)=>{let u=0,e=0,c=0;return m.length===4?(u="0x"+m[1]+m[1],e="0x"+m[2]+m[2],c="0x"+m[3]+m[3]):m.length===7&&(u="0x"+m[1]+m[2],e="0x"+m[3]+m[4],c="0x"+m[5]+m[6]),`rgba(${+u},${+e},${+c},${o})`},pa={class:"layout-breadcrumb"},ma={class:"cursor-pointer"},_a={__name:"LayoutBreadcrumb",setup(m){const{t:o}=X(),u=oe(),e=le(),c=Y(),d=H(),p=l(()=>d.headerColor),y=l(()=>p.value==="#fff"?"dark":"light"),i=l(()=>{var b,$,v;if((b=e.meta)!=null&&b.namePath){let g=c.menus;const w=(v=($=e.meta)==null?void 0:$.namePath)==null?void 0:v.map(x=>{const S=g.find(D=>D.name===x);return g=(S==null?void 0:S.children)||[],S});return[{name:"__index",meta:{title:"route.home"},children:c.menus},...w]}return e.matched}),_=b=>{const{outsideLink:$}=(b==null?void 0:b.meta)||{};if($)window.open(b.path);else{const v=typeof b.redirect=="string"?b.redirect:b;u.push(v)}},L=b=>{var $;return[($=i.value[b+1])==null?void 0:$.name]},f=l(()=>({"--breadcrumb-overlay-color":da(p.value,.5),"--breadcrumb-color":p.value}));return(b,$)=>{const v=_e,g=ve,w=Kt,x=zt;return t(),O("div",pa,[n(x,{style:W(f.value)},{default:a(()=>[(t(!0),O(K,null,J(i.value,(S,D)=>{var z;return t(),r(w,{key:S==null?void 0:S.name},gt({default:a(()=>{var R;return[j("span",ma,M(s(o)((R=S==null?void 0:S.meta)==null?void 0:R.title)),1)]}),_:2},[(z=S==null?void 0:S.children)!=null&&z.length?{name:"overlay",fn:a(()=>[n(g,{"selected-keys":L(D),theme:y.value},{default:a(()=>[(t(!0),O(K,null,J(S==null?void 0:S.children,R=>(t(),r(v,{key:R.name,onClick:C=>_(R)},{default:a(()=>{var C;return[j("span",null,M(s(o)((C=R.meta)==null?void 0:C.title)),1)]}),_:2},1032,["onClick"]))),128))]),_:2},1032,["selected-keys","theme"])]),key:"0"}:void 0]),1024)}),128))]),_:1},8,["style"])])}}},va=Se(_a,[["__scopeId","data-v-f703bb0e"]]),fa=wt({__name:"FullScreen",setup(m){const{toggle:o,isFullscreen:u}=vt(),{t:e}=X(),c=l(()=>s(u)?e("setting.exitFullscreen"):e("setting.fullscreen"));return(d,p)=>{const y=pe;return t(),r(y,{title:c.value},{default:a(()=>[j("span",{onClick:p[0]||(p[0]=(...i)=>s(o)&&s(o)(...i)),class:"cursor-pointer"},[s(u)?(t(),r(s(Tt),{key:1})):(t(),r(s(xt),{key:0}))])]),_:1},8,["title"])}}}),ya={key:0,class:"max-h600px overflow-auto"},ha={class:"flex-bc"},ga={key:0},wa={__name:"SearchMenu",setup(m){const o=oe(),{t:u}=X(),e=Y(),c=l(()=>e.menuList),d=H(),p=l(()=>d.layoutSetting),y=B(!1),i=B(""),_=kt([]),L=B(null),f=B("");ae(()=>y.value,()=>{y.value&&He(()=>{L.value.focus()})});const b=ft(()=>$(),300),$=()=>{var g;i.value?(_.value=c.value.filter(w=>{var x;return(x=w.searchTitle)==null?void 0:x.toLocaleLowerCase().includes(i.value.toLocaleLowerCase().trim())}),f.value=(g=_.value[0])==null?void 0:g.name):(_.value=[],f.value="")},v=()=>{f.value&&(o.push({name:f.value}),y.value=!1,i.value="",_.value=[])};return re("Enter",v),re("Escape",()=>{y.value=!1,i.value="",_.value=[]}),re("ArrowUp",()=>{const{length:g}=_.value;if(!g)return;const w=_.value.findIndex(x=>x.name===f.value);w===0?f.value=_.value[g-1].name:f.value=_.value[w-1].name}),re("ArrowDown",()=>{const{length:g}=_.value;if(!g)return;const w=_.value.findIndex(x=>x.name===f.value);w===g-1?f.value=_.value[0].name:f.value=_.value[w+1].name}),(g,w)=>{const x=ze,S=me,D=Nt,z=Vt,R=xe,C=We,I=pe;return t(),r(I,{title:s(u)("setting.searchMenu")},{default:a(()=>[n(s(Ee),{onClick:w[0]||(w[0]=E=>y.value=!0)}),n(C,{open:y.value,"onUpdate:open":w[2]||(w[2]=E=>y.value=E),closable:!1,keyboard:!1},{footer:a(()=>[j("div",ha,[n(R,{size:20},{default:a(()=>[n(z,{class:"flex items-center"},{default:a(()=>[n(s(te),{class:"shadow mr8px",icon:"mdi:keyboard-return"}),A(" "+M(s(u)("setting.confirm")),1)]),_:1}),n(z,{class:"flex items-center"},{default:a(()=>[n(s(te),{class:"shadow mr8px",icon:"mdi:keyboard-arrow-up"}),n(s(te),{class:"shadow mr8px",icon:"mdi:keyboard-arrow-down"}),A(" "+M(s(u)("setting.toggle")),1)]),_:1}),n(z,{class:"flex items-center"},{default:a(()=>[n(s(te),{class:"shadow mr8px",icon:"mdi:keyboard-esc"}),A(" "+M(s(u)("setting.close")),1)]),_:1})]),_:1}),_.value.length>0?(t(),O("span",ga,"共"+M(_.value.length)+"项",1)):T("",!0)])]),default:a(()=>[n(x,{ref_key:"inputRef",ref:L,size:"large",placeholder:"搜索菜单",value:i.value,"onUpdate:value":w[1]||(w[1]=E=>i.value=E),onChange:s(b)},{prefix:a(()=>[n(s(Ee))]),_:1},8,["value","onChange"]),_.value.length>0?(t(),O("div",ya,[(t(!0),O(K,null,J(_.value,E=>(t(),r(S,{key:E.path,class:"shadow mt10px cursor-pointer",bodyStyle:{padding:"18px"},style:W(f.value===E.name?{background:p.value.colorPrimary,color:"#fff"}:{}),onMouseenter:q=>f.value=E.name,onClick:v},{default:a(()=>[n(s(te),{class:"iconify anticon mr10px",icon:E.meta.icon},null,8,["icon"]),A(" "+M(E.searchTitle)+" ",1),f.value===E.name?(t(),r(s(te),{key:0,class:"float-right mt5px",icon:"mdi:keyboard-return"})):T("",!0)]),_:2},1032,["style","onMouseenter"]))),128))])):(t(),r(D,{key:1,class:"p20px m0"}))]),_:1},8,["open"])]),_:1},8,["title"])}}},ka={__name:"ChangePassword",setup(m){const{t:o}=X(),u=Ze(),e=B({password:"",new_password:"",confirm_password:""}),c=()=>{if(e.value.new_password!=e.value.confirm_password){de.error(o("message.TwoDifferentPasswords"));return}u.changePassword(e.value).then(()=>{de.success(`${o("message.modifySuccess")},${o("message.jumpTo3")}`),setTimeout(()=>{u.logout()},3*1e3)})},d=p=>{console.log("Failed:",p)};return(p,y)=>{const i=Wt,_=qt,L=Ne,f=Gt;return t(),r(f,{model:e.value,onFinish:c,onFinishFailed:d},{default:a(()=>[n(_,{name:"password",rules:[{required:!0,message:s(o)("message.PleaseEnterOriginalPassword")}]},{default:a(()=>[n(i,{value:e.value.password,"onUpdate:value":y[0]||(y[0]=b=>e.value.password=b),placeholder:s(o)("message.PleaseEnterOriginalPassword")},{prefix:a(()=>[n(s(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,{name:"new_password",rules:[{required:!0,message:s(o)("message.pleaseEnterNewPassword")},{min:6,message:s(o)("message.PasswordLength"),trigger:"blur"}]},{default:a(()=>[n(i,{value:e.value.new_password,"onUpdate:value":y[1]||(y[1]=b=>e.value.new_password=b),placeholder:s(o)("message.pleaseEnterNewPassword")},{prefix:a(()=>[n(s(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,{name:"confirm_password",rules:[{required:!0,message:s(o)("message.PleaseEnterConfirmPassword")},{min:6,message:s(o)("message.PasswordLength"),trigger:"blur"}]},{default:a(()=>[n(i,{value:e.value.confirm_password,"onUpdate:value":y[2]||(y[2]=b=>e.value.confirm_password=b),placeholder:s(o)("message.PleaseEnterConfirmPassword")},{prefix:a(()=>[n(s(ie))]),_:1},8,["value","placeholder"])]),_:1},8,["rules"]),n(_,null,{default:a(()=>[n(L,{class:"w100%",type:"primary","html-type":"submit"},{default:a(()=>[A(M(s(o)("setting.confirm")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}},ba={__name:"UserAvatar",setup(m){const{t:o}=X(),u=Ze(),e=l(()=>u.userInfo),c=B(!1),d=()=>{u.logout()},p=()=>{c.value=!0};return(y,i)=>{const _=_e,L=ve,f=qe,b=We;return t(),O("div",null,[n(f,{class:"cp"},{overlay:a(()=>[n(L,null,{default:a(()=>[n(_,{onClick:p},{default:a(()=>[A(M(s(o)("setting.changePassword")),1)]),_:1}),n(_,{onClick:d},{default:a(()=>[A(M(s(o)("setting.logout")),1)]),_:1})]),_:1})]),default:a(()=>[j("span",null,M(e.value.user&&e.value.user.username||"admin"),1)]),_:1}),n(b,{open:c.value,"onUpdate:open":i[0]||(i[0]=$=>c.value=$),title:s(o)("setting.changePassword")},{footer:a(()=>i[1]||(i[1]=[])),default:a(()=>[n(ka)]),_:1},8,["open","title"])])}}},Sa={class:"flex-cc flex-1"},ge={__name:"LayoutHeader",props:{collapsed:{type:Boolean}},emits:["update:collapsed"],setup(m,{emit:o}){X(),Y();const u=H(),e=u.layoutSetting,c=l(()=>e.layout==="sidemenu"),d=l(()=>e.layout==="topmenu"),p=l(()=>e.layout==="mixinmenu"),y=l(()=>e.showBreadcrumb);l(()=>e.showSearchMenu),l(()=>e.showLockScreen),l(()=>e.showFullScreen),l(()=>e.showSetting),l(()=>e.showRefreshReset),l(()=>e.locale);const i=l(()=>e.sidemenuWidth),_=l(()=>u.headerBackground),L=l(()=>u.headerColor),f=l(()=>u.border),b=o,$=l(()=>({height:"var(--app-header-height)",padding:c.value?"0 20px":"0 20px 0 0",background:_.value,color:L.value,borderBottom:f.value}));return(v,g)=>{const w=xe,x=Jt;return t(),r(x,{class:"flex-bc",style:W($.value)},{default:a(()=>[c.value?T("",!0):(t(),O("div",{key:0,style:W({width:`${i.value}px`})},[ce(v.$slots,"title")],4)),d.value?T("",!0):(t(),O("div",{key:1,style:W({paddingLeft:p.value?"20px":0})},[ce(v.$slots,"left"),d.value?T("",!0):(t(),r(w,{key:0,size:20},{default:a(()=>[j("span",{class:"cursor-pointer",onClick:g[0]||(g[0]=()=>b("update:collapsed",!m.collapsed))},[(t(),r(be(m.collapsed?s(Ct):s(Lt))))]),y.value?(t(),r(va,{key:0})):T("",!0)]),_:1}))],4)),j("div",Sa,[ce(v.$slots,"menu")]),j("div",null,[n(w,{size:20},{default:a(()=>[n(ba)]),_:1})])]),_:3},8,["style"])}}},xa={href:"http://www.easydarwin.org",target:"_blank"},we={__name:"LayoutFooter",setup(m){const o=Y(),u=l(()=>o.systemTime),e=H(),c=l(()=>e.layoutSetting.copyright);return(d,p)=>{const y=me,i=Zt;return t(),r(i,{style:{padding:"0 20px 20px 20px"}},{default:a(()=>[n(y,{class:"text-center",bodyStyle:{padding:"10px"}},{default:a(()=>[A(" Copyright © 2012~"+M(u.value.year)+" ",1),j("a",xa,"www."+M(c.value)+".org",1)]),_:1})]),_:1})}}},Ta={key:1,style:{display:"inline-block"}},Ie={__name:"TabsOperator",props:{tabItem:{type:Object,required:!0},isExtra:{type:Boolean,default:!1}},setup(m,{expose:o}){const u=m,{t:e}=X(),c=le(),d=oe(),p=Y(),y=!1,i=l(()=>{var R;return(R=p.getCurrentTab)==null?void 0:R.fullPath}),_=l(()=>p.getTabsList),f=H().layoutSetting,b=l(()=>f.tabsIcon),$=R=>d.currentRoute.value.matched.some(C=>C.name===R.name),v=()=>{d.replace({name:"Refresh",path:s(c).fullPath})},g=()=>{if(_.value.length===1)return de.warning(e("message.lastPageCannotBeClosed"));p.closeCurrentTab(u.tabItem)};o({removeTab:g});const w=()=>{p.closeLeftTabs(u.tabItem),!$(u.tabItem)&&d.replace(u.tabItem.fullPath)},x=()=>{p.closeRightTabs(u.tabItem),!$(u.tabItem)&&d.replace(u.tabItem.fullPath)},S=()=>{p.closeOtherTabs(u.tabItem),!$(u.tabItem)&&d.replace(u.tabItem.fullPath)},D=()=>{p.closeAllTabs(),d.replace("/")},z=async()=>{{console.warn("仅在开发环境有效");return}};return(R,C)=>{const I=_e,E=Ge,q=ve,N=qe;return t(),r(N,{trigger:[m.isExtra?"click":"contextmenu"]},{overlay:a(()=>[n(q,{style:{"user-select":"none"}},{default:a(()=>[n(I,{key:"1",disabled:i.value!==m.tabItem.fullPath,onClick:v},{default:a(()=>[n(s(Ke)),C[1]||(C[1]=A(" 重新加载 "))]),_:1},8,["disabled"]),n(I,{key:"2",onClick:g},{default:a(()=>[n(s($t)),C[2]||(C[2]=A(" 关闭标签页 "))]),_:1}),n(E,{class:"m0"}),n(I,{key:"3",onClick:w},{default:a(()=>[n(s(Pt)),C[3]||(C[3]=A(" 关闭左侧标签页 "))]),_:1}),n(I,{key:"4",onClick:x},{default:a(()=>[n(s(Rt)),C[4]||(C[4]=A(" 关闭右侧标签页 "))]),_:1}),n(E,{class:"m0"}),n(I,{key:"5",onClick:S},{default:a(()=>[n(s(De)),C[5]||(C[5]=A(" 关闭其他标签页 "))]),_:1}),n(I,{key:"6",onClick:D},{default:a(()=>[n(s(Ft)),C[6]||(C[6]=A(" 关闭全部标签页 "))]),_:1}),s(y)?(t(),O(K,{key:0},[n(E,{class:"m0"}),n(I,{key:"7",onClick:z},{default:a(()=>[n(s(De)),C[7]||(C[7]=A(" 打开页面文件 "))]),_:1})],64)):T("",!0)]),_:1})]),default:a(()=>{var G;return[m.isExtra?(t(),O("span",{key:0,class:"cursor-pointer",onClick:C[0]||(C[0]=bt(()=>{},["prevent"]))},[n(s(Ot))])):(t(),O("div",Ta,[b.value?(t(),r(s(te),{key:0,class:"iconify anticon",icon:m.tabItem.meta.icon},null,8,["icon"])):T("",!0),j("span",null,M(s(e)((G=m.tabItem.meta)==null?void 0:G.title)),1)]))]}),_:1},8,["trigger"])}}},Ca={class:"tabs-view"},La={__name:"LayoutTabs",setup(m){const o=le(),u=oe(),e=Y(),d=H().layoutSetting,p=l(()=>d.showHeader),y=l(()=>d.showTabs),i=l(()=>d.showSearchMenu),_=l(()=>d.showFullScreen),L=l(()=>d.showLockScreen),f=l(()=>d.showSetting),b=l(()=>d.showRefreshReset),$=B(o.fullPath);ae(()=>o.fullPath,R=>{$.value=R});const v={},g=R=>{Object.is(o.fullPath,R)||u.push(R)},w=(R,C)=>{var I;C==="remove"&&((I=v[R])==null||I.removeTab())},x=l(()=>d.algorithm==="darkAlgorithm"?"black":"white"),S=l(()=>`${d.borderRadius}px`),D=l(()=>d.algorithm==="darkAlgorithm"?"1px solid black":"1px solid #eee"),z=B({margin:0,padding:"5px 20px",userSelect:"none",background:x,"--border-radius":S,"--border":D});return(R,C)=>{const I=Xt,E=Ge,q=pe,N=xe,G=Yt;return t(),O("div",Ca,[y.value?(t(),r(G,{key:0,class:"tabs",type:"editable-card",activeKey:$.value,"onUpdate:activeKey":C[2]||(C[2]=V=>$.value=V),hideAdd:!0,tabBarGutter:5,tabBarStyle:z.value,onChange:g,onEdit:w},{rightExtra:a(()=>[n(N,null,{split:a(()=>[n(E,{type:"vertical"})]),default:a(()=>[n(Ie,{tabItem:s(o),isExtra:!0},null,8,["tabItem"]),!p.value&&i.value?(t(),r(wa,{key:0})):T("",!0),!p.value&&L.value?(t(),r(q,{key:1,title:"锁屏"},{default:a(()=>[n(s(ie),{onClick:C[0]||(C[0]=V=>s(e).setLockScreenState(!0))})]),_:1})):T("",!0),!p.value&&_.value?(t(),r(fa,{key:2})):T("",!0),!p.value&&b.value?(t(),r(q,{key:3,title:"刷新重置"},{default:a(()=>[n(s(Ke),{onClick:C[1]||(C[1]=V=>s(e).clearCacheReload())})]),_:1})):T("",!0),!p.value&&f.value?(t(),r(Te,{key:4})):T("",!0)]),_:1})]),default:a(()=>[(t(!0),O(K,null,J(s(e).getTabsList,V=>(t(),r(I,{key:V.fullPath},{tab:a(()=>[n(Ie,{ref_for:!0,ref:h=>v[V.fullPath]=h,tabItem:V},null,8,["tabItem"])]),_:2},1024))),128))]),_:1},8,["activeKey","tabBarStyle"])):T("",!0),ce(R.$slots,"default",{},void 0,!0)])}}},ke=Se(La,[["__scopeId","data-v-b8cf4cbc"]]),$a={__name:"SideMenuLayout",setup(m){const o=B(!1),u=H(),e=u.layoutSetting,c=l(()=>e.sidemenuWidth),d=l(()=>e.menuTheme),p=l(()=>e.showTitle),y=l(()=>e.showHeader),i=l(()=>e.showFooter),_=l(()=>e.watermark),L=l(()=>e.watermarkArea==="content"),f=l(()=>e.watermarkText),b=l(()=>u.border);return($,v)=>{const g=Je,w=se,x=fe,S=ue;return t(),r(S,{class:"h100vh overflow-hidden"},{default:a(()=>[n(g,{collapsed:o.value,"onUpdate:collapsed":v[0]||(v[0]=D=>o.value=D),width:c.value,collapsedWidth:80,collapsible:!0,trigger:null,theme:d.value,style:W({borderRight:b.value})},{default:a(()=>[p.value?(t(),r(ye,{key:0,collapsed:o.value},null,8,["collapsed"])):T("",!0),n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed","width","theme","style"]),n(S,null,{default:a(()=>[y.value?(t(),r(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":v[1]||(v[1]=D=>o.value=D)},null,8,["collapsed"])):T("",!0),n(x,null,{default:a(()=>[n(ke),_.value&&L.value?(t(),r(w,{key:0,content:f.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1}))]),_:1}),i.value?(t(),r(we,{key:1})):T("",!0)]),_:1})]),_:1})}}},Pa={__name:"TopMenuLayout",setup(m){const o=B(!1),e=H().layoutSetting,c=l(()=>e.showTitle),d=l(()=>e.showHeader),p=l(()=>e.showFooter),y=l(()=>e.watermark),i=l(()=>e.watermarkArea==="content"),_=l(()=>e.watermarkText);return(L,f)=>{const b=se,$=fe,v=ue;return t(),r(v,{class:"h100vh overflow-hidden"},{default:a(()=>[d.value?(t(),r(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":f[0]||(f[0]=g=>o.value=g)},{title:a(()=>[c.value?(t(),r(ye,{key:0,collapsed:o.value},null,8,["collapsed"])):T("",!0)]),menu:a(()=>[n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed"])):T("",!0),n($,null,{default:a(()=>[n(ke),y.value&&i.value?(t(),r(b,{key:0,content:_.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1}))]),_:1}),p.value?(t(),r(we,{key:1})):T("",!0)]),_:1})}}},Ra={__name:"MixinMenuLayout",setup(m){const o=B(!1),u=H(),e=u.layoutSetting,c=l(()=>e.menuTheme),d=l(()=>e.showTitle),p=l(()=>e.showHeader),y=l(()=>e.showFooter),i=l(()=>e.sidemenuWidth),_=l(()=>e.watermark),L=l(()=>e.watermarkArea==="content"),f=l(()=>e.watermarkText),b=l(()=>u.border);return($,v)=>{const g=Je,w=se,x=fe,S=ue;return t(),r(S,{class:"h100vh overflow-hidden"},{default:a(()=>[p.value?(t(),r(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":v[0]||(v[0]=D=>o.value=D)},{title:a(()=>[d.value?(t(),r(ye,{key:0})):T("",!0)]),_:1},8,["collapsed"])):T("",!0),n(S,null,{default:a(()=>[n(g,{collapsed:o.value,"onUpdate:collapsed":v[1]||(v[1]=D=>o.value=D),width:i.value,theme:c.value,collapsedWidth:80,collapsible:!0,trigger:null,style:W({borderRight:b.value})},{default:a(()=>[n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["collapsed","width","theme","style"]),n(S,null,{default:a(()=>[n(x,null,{default:a(()=>[n(ke),_.value&&L.value?(t(),r(w,{key:0,content:f.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1}))]),_:1}),y.value?(t(),r(we,{key:0})):T("",!0)]),_:1})]),_:1})]),_:1})}}},Fa={__name:"MobileDeviceLayout",setup(m){const o=B(!1),e=H().layoutSetting,c=l(()=>e.sidemenuWidth),d=l(()=>e.showTitle),p=l(()=>e.showHeader),y=l(()=>e.showFooter),i=l(()=>e.watermark),_=l(()=>e.watermarkArea==="content"),L=l(()=>e.watermarkText);return(f,b)=>{const $=Ve,v=se,g=fe,w=ue;return t(),r(w,null,{default:a(()=>[n($,{open:o.value,"onUpdate:open":b[0]||(b[0]=x=>o.value=x),placement:"left",bodyStyle:{padding:0},width:c.value,closable:!1},{default:a(()=>[d.value?(t(),r(ye,{key:0,collapsed:!1})):T("",!0),n(he,{collapsed:o.value},null,8,["collapsed"])]),_:1},8,["open","width"]),p.value?(t(),r(ge,{key:0,collapsed:o.value,"onUpdate:collapsed":b[1]||(b[1]=x=>o.value=x)},null,8,["collapsed"])):T("",!0),n(g,null,{default:a(()=>[n(ke),i.value&&_.value?(t(),r(v,{key:0,content:L.value},{default:a(()=>[n(Z)]),_:1},8,["content"])):(t(),r(Z,{key:1}))]),_:1}),y.value?(t(),r(we,{key:1})):T("",!0)]),_:1})}}},Fo={__name:"LayoutDefault",setup(m){const u=H().layoutSetting,e=l(()=>u.layout==="sidemenu"),c=l(()=>u.layout==="topmenu"),d=l(()=>u.layout==="mixinmenu"),p=l(()=>u.onlyShowContent),y=Y(),i=l(()=>y.device);return(_,L)=>p.value?(t(),r(sa,{key:1})):(t(),O(K,{key:0},[i.value==="desktop"?(t(),O(K,{key:0},[e.value?(t(),r($a,{key:0})):c.value?(t(),r(Pa,{key:1})):d.value?(t(),r(Ra,{key:2})):T("",!0)],64)):i.value==="mobile"?(t(),r(Fa,{key:1})):T("",!0)],64))}};export{Fo as default};
